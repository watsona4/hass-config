{# Severity definitions for voltage measurements (HA device_class: voltage) #}

{# Standard voltage levels for various applications #}
{% set lookup_unit = 'V' %}
{% set levels = {
  "electronics": [
    {
      "min_value": 0,
      "default_desc": "No Power",
      "short_desc": "No Pwr",
      "long_desc": "No Voltage",
      "icon": "mdi:flash-off",
      "color": "#0f172a",
      "full_desc": "No measurable voltage; circuit unpowered or disconnected."
    },
    {
      "min_value": 0.1,
      "default_desc": "Undervoltage (Logic)",
      "short_desc": "UV 5V",
      "long_desc": "Logic/USB Undervoltage",
      "icon": "mdi:flash-alert",
      "color": "#dc2626",
      "full_desc": "Supply far below expected (5V logic / USB). Devices unstable or non-functional."
    },
    {
      "min_value": 4.75,
      "default_desc": "Nominal 5V",
      "short_desc": "5V",
      "long_desc": "5V Supply OK",
      "icon": "mdi:flash",
      "color": "#22c55e",
      "full_desc": "Voltage in normal 5V logic/USB range."
    },
    {
      "min_value": 5.25,
      "default_desc": "Overvoltage (Logic)",
      "short_desc": "OV 5V",
      "long_desc": "5V Overvoltage",
      "icon": "mdi:flash-triangle",
      "color": "#f97316",
      "full_desc": "Voltage above USB tolerance; may damage connected devices."
    },
  ],
  "automotive": [
    {
      "min_value": 11.0,
      "default_desc": "Undervoltage (Auto)",
      "short_desc": "UV 12V",
      "long_desc": "Automotive 12V Low",
      "icon": "mdi:car-battery",
      "color": "#eab308",
      "full_desc": "Battery low; engine may fail to start."
    },
    {
      "min_value": 12.0,
      "default_desc": "Nominal 12V",
      "short_desc": "12V",
      "long_desc": "Automotive 12V Normal",
      "icon": "mdi:car-battery",
      "color": "#22c55e",
      "full_desc": "Healthy 12V system; normal for charged lead-acid battery."
    },
    {
      "min_value": 14.5,
      "default_desc": "Overvoltage (Auto)",
      "short_desc": "OV 12V",
      "long_desc": "Automotive Overvoltage",
      "icon": "mdi:car-battery",
      "color": "#f97316",
      "full_desc": "Charging system overvoltage; risk of boiling battery or electronics damage."
    },
  ],
  "telecom_48v": [
    {
      "min_value": 23.0,
      "default_desc": "Undervoltage (24V)",
      "short_desc": "UV 24V",
      "long_desc": "24V Supply Low",
      "icon": "mdi:flash-alert",
      "color": "#f97316",
      "full_desc": "24V rail below tolerance; PLCs and controls may malfunction."
    },
    {
      "min_value": 24.0,
      "default_desc": "Nominal 24V",
      "short_desc": "24V",
      "long_desc": "24V Supply Normal",
      "icon": "mdi:flash",
      "color": "#22c55e",
      "full_desc": "Voltage in nominal 24V DC range."
    },
    {
      "min_value": 28.0,
      "default_desc": "Overvoltage (24V)",
      "short_desc": "OV 24V",
      "long_desc": "24V Overvoltage",
      "icon": "mdi:flash-triangle",
      "color": "#dc2626",
      "full_desc": "24V system above tolerance; component stress and failures possible."
    },
    {
      "min_value": 47.0,
      "default_desc": "Undervoltage (48V)",
      "short_desc": "UV 48V",
      "long_desc": "48V Supply Low",
      "icon": "mdi:flash-alert",
      "color": "#f97316",
      "full_desc": "48V rail sagging; telecom/PoE gear may reset."
    },
    {
      "min_value": 48.0,
      "default_desc": "Nominal 48V",
      "short_desc": "48V",
      "long_desc": "48V Supply Normal",
      "icon": "mdi:flash",
      "color": "#22c55e",
      "full_desc": "Voltage in nominal 48V DC range."
    },
    {
      "min_value": 57.0,
      "default_desc": "Overvoltage (48V)",
      "short_desc": "OV 48V",
      "long_desc": "48V Overvoltage",
      "icon": "mdi:flash-triangle",
      "color": "#dc2626",
      "full_desc": "Voltage too high; exceeds safe range for PoE and telecom equipment."
    },
  ],
  "mains": [
    {
      "min_value": 105,
      "default_desc": "Undervoltage (Mains)",
      "short_desc": "UV Mains",
      "long_desc": "Mains Brownout",
      "icon": "mdi:flash-alert",
      "color": "#f97316",
      "full_desc": "Mains AC below tolerance; lights dim, devices unstable."
    },
    {
      "min_value": 110,
      "default_desc": "Nominal 120V",
      "short_desc": "120V",
      "long_desc": "120V AC Normal",
      "icon": "mdi:flash",
      "color": "#22c55e",
      "full_desc": "North American line voltage in spec."
    },
    {
      "min_value": 125,
      "default_desc": "Overvoltage (Mains)",
      "short_desc": "OV Mains",
      "long_desc": "Mains Overvoltage",
      "icon": "mdi:flash-triangle",
      "color": "#dc2626",
      "full_desc": "Line voltage above safe tolerance; risk of equipment damage."
    },
    {
      "min_value": 210,
      "default_desc": "Nominal 230V",
      "short_desc": "230V",
      "long_desc": "230V AC Normal",
      "icon": "mdi:flash",
      "color": "#22c55e",
      "full_desc": "European mains nominal."
    },
    {
      "min_value": 250,
      "default_desc": "Overvoltage (230V)",
      "short_desc": "OV 230V",
      "long_desc": "230V Overvoltage",
      "icon": "mdi:flash-triangle",
      "color": "#dc2626",
      "full_desc": "European mains above spec; dangerous to equipment."
    }
  ],
  "core_voltage": [
    {
      "min_value": none,
      "default_desc":"Unavailable",
      "short_desc":"N/A",
      "long_desc":"Voltage unavailable",
      "icon":"mdi:close-circle",
      "color":"Disabled",
      "full_desc":"No reading from core voltage sensor."
    },
    {
      "min_value": 0.0,
      "default_desc":"No Power",
      "short_desc":"No Pwr",
      "long_desc":"Core Rail Off",
      "icon":"mdi:flash-off",
      "color":"#9ca3af",
      "full_desc":"Rail unpowered or device in deep sleep."
    },
    {
      "min_value": 0.20,
      "default_desc":"Undervoltage",
      "short_desc":"UV",
      "long_desc":"Core Undervoltage",
      "icon":"mdi:flash-alert",
      "color":"#ef4444",
      "full_desc":"Below safe operating range; instability likely."
    },
    {
      "min_value": 0.60,
      "default_desc":"Low (Idle)",
      "short_desc":"Low",
      "long_desc":"Low Core Voltage",
      "icon":"mdi:chip",
      "color":"#84cc16",
      "full_desc":"Typical idle/low-power P-states."
    },
    {
      "min_value": 0.80,
      "default_desc":"Nominal",
      "short_desc":"Nominal",
      "long_desc":"Nominal Core Voltage",
      "icon":"mdi:chip",
      "color":"#22c55e",
      "full_desc":"Normal operating range for most loads."
    },
    {
      "min_value": 1.20,
      "default_desc":"High",
      "short_desc":"High",
      "long_desc":"High Core Voltage",
      "icon":"mdi:chip",
      "color":"#eab308",
      "full_desc":"Elevated for boost or heavy load; monitor thermals."
    },
    {
      "min_value": 1.30,
      "default_desc":"Overvoltage",
      "short_desc":"OV",
      "long_desc":"Core Overvoltage",
      "icon":"mdi:flash-triangle",
      "color":"#dc2626",
      "full_desc":"Above recommended limits for many cores; risk of degradation."
    },
    {
      "min_value": 1.50,
      "default_desc":"Extreme",
      "short_desc":"Extreme",
      "long_desc":"Extreme Core Voltage",
      "icon":"mdi:alert-octagon",
      "color":"#7c3aed",
      "full_desc":"Dangerous level; potential immediate damage."
    }
  ]
} %}

{% macro get_dc_context() %}{{- {'lookup_unit': lookup_unit, 'levels': levels} | tojson -}}{% endmacro %}
