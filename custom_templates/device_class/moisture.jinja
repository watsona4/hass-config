{# Severity definitions for moisture #}
{# Device: Relative moisture of medium or pad #}
{# Typical applications: Soil sensors, leak pads #}

{% set lookup_unit = "%" %}
{% set levels = {
    "soil_sensor": [
        {
            "min_value": none,
            "default_desc": "Unavailable",
            "short_desc": "Disabled",
            "long_desc": "Sensor unavailable",
            "icon": "mdi:eye-off",
            "color": "disabled",
            "badge": "mdi:circle",
            "full_desc": "Sensor not currently available."
        },
        {
            "min_value": 0,
            "default_desc": "Dry",
            "short_desc": "Dry",
            "long_desc": "Very dry soil",
            "icon": "mdi:water-off",
            "color": "#f97316",
            "full_desc": "Irrigation needed."
        },
        {
            "min_value": 15,
            "default_desc": "Low",
            "short_desc": "Low",
            "long_desc": "Low moisture",
            "icon": "mdi:water-outline",
            "color": "#eab308",
            "full_desc": "Plan watering."
        },
        {
            "min_value": 30,
            "default_desc": "Optimal",
            "short_desc": "Opt",
            "long_desc": "Optimal range",
            "icon": "mdi:water",
            "color": "#22c55e",
            "full_desc": "Healthy plants."
        },
        {
            "min_value": 60,
            "default_desc": "Wet",
            "short_desc": "Wet",
            "long_desc": "Wet soil",
            "icon": "mdi:water-plus",
            "color": "#60a5fa",
            "full_desc": "Reduce watering."
        },
        {
            "min_value": 80,
            "default_desc": "Saturated",
            "short_desc": "Sat",
            "long_desc": "Saturated soil",
            "icon": "mdi:water-alert",
            "color": "#dc2626",
            "full_desc": "Root rot risk."
        }
    ],
    "leak_pad": [
        {
            "min_value": none,
            "default_desc": "Unavailable",
            "short_desc": "Disabled",
            "long_desc": "Sensor unavailable",
            "icon": "mdi:eye-off",
            "color": "disabled",
            "badge": "mdi:circle",
            "full_desc": "Sensor not currently available."
        },
        {
            "min_value": 0,
            "default_desc": "Dry",
            "short_desc": "Dry",
            "long_desc": "No leak",
            "icon": "mdi:water-off",
            "color": "#22c55e",
            "full_desc": "Pad dry."
        },
        {
            "min_value": 1,
            "default_desc": "Wet",
            "short_desc": "Wet",
            "long_desc": "Moist or leak",
            "icon": "mdi:water-alert",
            "color": "#dc2626",
            "full_desc": "Investigate leak source."
        }
    ]
} %}

{% macro get_dc_context() %}
    {{ {'lookup_unit': lookup_unit, 'levels': levels} | tojson }}
{% endmacro %}
