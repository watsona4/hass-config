{# Severity definitions for signal strength #}
{# Device: Received signal power in dBm #}
{# Typical applications: Wi-Fi clients, Zigbee proxy mapping #}

{% set lookup_unit = "dBm" %}
{% set levels = {
    "wifi_client": [
        {
            "min_value": -120,
            "default_desc": "No Link",
            "short_desc": "No",
            "long_desc": "No signal",
            "icon": "mdi:wifi-strength-outline",
            "color": "#9ca3af",
            "full_desc": "Disconnected."
        },
        {
            "min_value": -85,
            "default_desc": "Poor",
            "short_desc": "Poor",
            "long_desc": "Poor signal",
            "icon": "mdi:wifi-strength-1",
            "color": "#f97316",
            "full_desc": "Drops likely."
        },
        {
            "min_value": -70,
            "default_desc": "Fair",
            "short_desc": "Fair",
            "long_desc": "Fair",
            "icon": "mdi:wifi-strength-2",
            "color": "#eab308",
            "full_desc": "Usable with limits."
        },
        {
            "min_value": -60,
            "default_desc": "Good",
            "short_desc": "Good",
            "long_desc": "Good",
            "icon": "mdi:wifi-strength-3",
            "color": "#22c55e",
            "full_desc": "Stable connection."
        },
        {
            "min_value": -50,
            "default_desc": "Excellent",
            "short_desc": "Excel",
            "long_desc": "Excellent",
            "icon": "mdi:wifi-strength-4",
            "color": "#10b981",
            "full_desc": "Ideal conditions."
        }
    ],
    "zigbee_lqi_proxy": [
        {
            "min_value": -120,
            "default_desc": "Bad",
            "short_desc": "Bad",
            "long_desc": "Very weak",
            "icon": "mdi:zigbee",
            "color": "#dc2626",
            "full_desc": "Routing needed."
        },
        {
            "min_value": -80,
            "default_desc": "OK",
            "short_desc": "OK",
            "long_desc": "Marginal",
            "icon": "mdi:zigbee",
            "color": "#eab308",
            "full_desc": "Add router nearby."
        },
        {
            "min_value": -60,
            "default_desc": "Good",
            "short_desc": "Good",
            "long_desc": "Good link",
            "icon": "mdi:zigbee",
            "color": "#22c55e",
            "full_desc": "Reliable."
        }
    ]
} %}

{% macro get_dc_context() %}
    {{ {'lookup_unit': lookup_unit, 'levels': levels} | tojson }}
{% endmacro %}
