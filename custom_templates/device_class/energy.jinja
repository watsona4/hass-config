{# ======================================================================
  Device class: energy
  Apps:
    - default : absolute energy over a period (chunk/interval)
    - daily   : TOTAL ENERGY PER DAY (utility meter daily rollup)

  Notes:
    - Matching uses lookup_unit "kWh". Your u_convert will normalize J, Wh, MWh, GJ, cal, etc.
====================================================================== #}

{% set lookup_unit = "kWh" %}

{% set levels = {
    "default": [
        {
            "min_value": none,
            "default_desc":"Unavailable",
            "short_desc":"N/A",
            "long_desc":"Energy reading unavailable",
            "icon":"mdi:close-circle",
            "color":"disabled",
            "full_desc":"No reading from energy sensor.",
        },
        {
            "min_value": 0.0,
            "default_desc":"None",
            "short_desc":"None",
            "long_desc":"No energy",
            "icon":"mdi:flash-off",
            "color":"#9ca3af",
            "full_desc":"No consumption this interval.",
        },
        {
            "min_value": 0.5,
            "default_desc":"Very Low",
            "short_desc":"V Low",
            "long_desc":"Very low energy",
            "icon":"mdi:power-sleep",
            "color":"#84cc16",
            "full_desc":"Standby loads only."
        },
        {
            "min_value": 5.0,
            "default_desc":"Low",
            "short_desc":"Low",
            "long_desc":"Low energy",
            "icon":"mdi:lightbulb-outline",
            "color":"#facc15",
            "full_desc":"Lights and small appliances."
        },
        {
            "min_value": 15.0,
            "default_desc":"Moderate",
            "short_desc":"Mod",
            "long_desc":"Moderate energy",
            "icon":"mdi:flash",
            "color":"#f59e0b",
            "full_desc":"Multiple appliances active."
        },
        {
            "min_value": 30.0,
            "default_desc":"High",
            "short_desc":"High",
            "long_desc":"High energy",
            "icon":"mdi:flash",
            "color":"#fb923c",
            "full_desc":"HVAC or cooking loads."
        },
        {
            "min_value": 50.0,
            "default_desc":"Very High",
            "short_desc":"V High",
            "long_desc":"Very high energy",
            "icon":"mdi:home-lightning-bolt",
            "color":"#ef4444",
            "full_desc":"Sustained heavy usage."
        },
        {
            "min_value": 80.0,
            "default_desc":"Extreme",
            "short_desc":"Extreme",
            "long_desc":"Extremely high",
            "icon":"mdi:alert",
            "color":"#dc2626",
            "full_desc":"Unusual for residential."
        },
        {
            "min_value": 120.0,
            "default_desc":"Massive",
            "short_desc":"Massive",
            "long_desc":"Massive interval total",
            "icon":"mdi:alert",
            "color":"#7c3aed",
            "full_desc":"Investigate usage or faults."
        }
    ],
    "daily": [
        {
            "min_value": none,
            "default_desc":"Unavailable",
            "short_desc":"N/A",
            "long_desc":"Daily total unavailable",
            "icon":"mdi:close-circle",
            "color":"disabled",
            "full_desc":"No daily total reported."
        },
        {
            "min_value": 0.0,
            "default_desc":"None",
            "short_desc":"None",
            "long_desc":"No daily use",
            "icon":"mdi:flash-off",
            "color":"#9ca3af",
            "full_desc":"Zero kWh today."
        },
        {
            "min_value": 5.0,
            "default_desc":"Very Low",
            "short_desc":"V Low",
            "long_desc":"Very low daily use",
            "icon":"mdi:power-sleep",
            "color":"#84cc16",
            "full_desc":"Minimal occupancy."
        },
        {
            "min_value": 15.0,
            "default_desc":"Low",
            "short_desc":"Low",
            "long_desc":"Low daily use",
            "icon":"mdi:lightbulb-outline",
            "color":"#facc15",
            "full_desc":"Efficient household day."
        },
        {
            "min_value": 30.0,
            "default_desc":"Moderate",
            "short_desc":"Mod",
            "long_desc":"Typical daily use",
            "icon":"mdi:flash",
            "color":"#f59e0b",
            "full_desc":"Average family day."
        },
        {
            "min_value": 50.0,
            "default_desc":"High",
            "short_desc":"High",
            "long_desc":"High daily use",
            "icon":"mdi:flash",
            "color":"#fb923c",
            "full_desc":"HVAC/cooking/laundry."
        },
        {
            "min_value": 80.0,
            "default_desc":"Very High",
            "short_desc":"V High",
            "long_desc":"Very high daily use",
            "icon":"mdi:home-lightning-bolt",
            "color":"#ef4444",
            "full_desc":"Peak season cooling/heating."
        },
        {
            "min_value": 120.0,
            "default_desc":"Extreme",
            "short_desc":"Extreme",
            "long_desc":"Extremely high",
            "icon":"mdi:alert",
            "color":"#dc2626",
            "full_desc":"Likely abnormal."

        },
        {
            "min_value": 200.0,
            "default_desc":"Massive",
            "short_desc":"Massive",
            "long_desc":"Massive daily total",
            "icon":"mdi:alert",
            "color":"#7c3aed",
            "full_desc":"Investigate immediately."
        }
    ]    ,
    "laptop_charge": [
        {
            "min_value": none,
            "default_desc":"Unavailable",
            "short_desc":"N/A",
            "long_desc":"Charge level unavailable",
            "icon":"mdi:close-circle",
            "color":"disabled",
            "full_desc":"No reading from laptop battery sensor."
        },
        {
            "min_value": 0.0,
            "default_desc":"Empty",
            "short_desc":"Empty",
            "long_desc":"Battery empty",
            "icon":"mdi:battery-alert",
            "color":"#9ca3af",
            "full_desc":"Battery is at or near 0%."
        },
        {
            "min_value": 0.005,
            "default_desc":"Critical",
            "short_desc":"Critical",
            "long_desc":"Critically low charge",
            "icon":"mdi:battery-10",
            "color":"#ef4444",
            "full_desc":"Plug in immediately to avoid shutdown."
        },
        {
            "min_value": 0.010,
            "default_desc":"Low",
            "short_desc":"Low",
            "long_desc":"Low charge",
            "icon":"mdi:battery-20",
            "color":"#f97316",
            "full_desc":"Limited runtime remaining."
        },
        {
            "min_value": 0.020,
            "default_desc":"Moderate",
            "short_desc":"Moderate",
            "long_desc":"Moderate charge",
            "icon":"mdi:battery-50",
            "color":"#eab308",
            "full_desc":"Usable but consider charging soon."
        },
        {
            "min_value": 0.035,
            "default_desc":"Good",
            "short_desc":"Good",
            "long_desc":"Good charge",
            "icon":"mdi:battery-70",
            "color":"#84cc16",
            "full_desc":"Comfortable runtime for typical use."
        },
        {
            "min_value": 0.050,
            "default_desc":"High",
            "short_desc":"High",
            "long_desc":"High charge",
            "icon":"mdi:battery-90",
            "color":"#22c55e",
            "full_desc":"Plenty of runtime available."
        },
        {
            "min_value": 0.070,
            "default_desc":"Full",
            "short_desc":"Full",
            "long_desc":"Battery full",
            "icon":"mdi:battery",
            "color":"#10b981",
            "full_desc":"Battery is fully charged."
        }
    ]
} %}

{% macro get_dc_context() %}
    {{ {'lookup_unit': lookup_unit, 'levels': levels} | tojson }}
{% endmacro %}
