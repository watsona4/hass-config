{# # File: config/custom_templates/dew_point.jinja ## #}
{# Macros for Dew Point levels, names, icons, colors, and guidance #}

{% from 'macros.jinja' import level_find, convert_temp_value %}

{# Breakpoints for Dew Point levels, in Â°C (lower bounds of each band) #}
{# Bands: Arid, Very Dry, Dry, Comfort, Slightly Humid, Humid, Very Humid, Oppressive, Miserable #}
{% set bps = [-50, 0, 5, 10, 13, 16, 18, 21, 24] %}

{# Names for Dew Point levels #}
{% set names = ["Arid", "Very Dry", "Dry", "Comfort", "Slightly Humid", "Humid", "Very Humid", "Oppressive", "Miserable"] %}

{# Short names for compact UIs #}
{% set shorts = ["Arid", "V Dry", "Dry", "Comfort", "Slight Hum", "Humid", "V Humid", "Oppress", "Miserable"] %}

{# Long names for descriptive titles #}
{% set longs = [
    "Arid Dew Point",
    "Very Dry Dew Point",
    "Dry Dew Point",
    "Comfort Dew Point",
    "Slightly Humid Dew Point",
    "Humid Dew Point",
    "Very Humid Dew Point",
    "Oppressive Dew Point",
    "Miserable Dew Point"
] %}

{# Icons for Dew Point levels #}
{% set icons = ['mdi:water-off', 'mdi:water-outline', 'mdi:water-percent', 'mdi:water-check', 'mdi:water', 'mdi:water-plus', 'mdi:water-alert', 'mdi:weather-pouring', 'mdi:waves'] %}

{# Colors for Dew Point levels: dry ambers to humid blues/purple #}
{% set colors = ['#a16207', '#d97706', '#f59e0b', '#10b981', '#2dd4bf', '#60a5fa', '#3b82f6', '#2563eb', '#7c3aed', 'disabled'] %}

{# Descriptions for each level #}
{% set descriptions = [
    "Exceptionally dry air; static and dry skin likely. Humidification may help indoors.",
    "Very dry; consider adding moisture for comfort and for wood instruments or plants.",
    "Dry; lips and skin may feel dry. Many find this crisp and comfortable outdoors.",
    "Comfortable for most people and activities.",
    "Slightly muggy; sensitive individuals may notice the humidity.",
    "Humid; heat starts to feel heavier. Improve ventilation or dehumidify indoors.",
    "Very humid; strenuous activity feels taxing. Dehumidification recommended.",
    "Oppressive humidity; strong air conditioning and dehumidification advised.",
    "Miserable humidity; limit strenuous activity, hydrate, and cool spaces aggressively."
] %}

{# Wrappers for standard functions #}
{# Clamp to a realistic dew point range before bucketing #}
{% macro level(dp, unit='f') -%}
    {%- set v = convert_temp_value(dp, unit, 'c')|float -%}
    {%- set v = -50 if v < -50 else (35 if v > 35 else v) -%}
    {{ level_find(v, bps) }}
{%- endmacro %}

{# djlint:off #}
{% macro name(dp, unit='C') %}{{ names[level(dp, unit)|int - 1] }}{% endmacro %}
{% macro short(dp, unit='C') %}{{ shorts[level(dp, unit)|int - 1] }}{% endmacro %}
{% macro long(dp, unit='C') %}{{ longs[level(dp, unit)|int - 1] }}{% endmacro %}
{% macro icon(dp, unit='C') %}{{ icons[level(dp, unit)|int - 1] }}{% endmacro %}
{% macro desc(dp, unit='C') %}{{ descriptions[level(dp, unit)|int - 1] }}{% endmacro %}
{% macro color(dp, unit='C') %}{{ colors[level(dp, unit)|int - 1] }}{% endmacro %}
{# djlint:on #}
