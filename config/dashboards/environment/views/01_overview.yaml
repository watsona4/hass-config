title: Home
type: sections
max_columns: 2
cards: []
badges:

  # UV protection
  - type: custom:mushroom-template-badge
    entity: binary_sensor.nearby_uv_protection
    icon: mdi:shield-sun
    color: "{{ state_attr('sensor.ui_nearby_uv_protection_badge', 'color') }}"
    content: "{{ state_attr('sensor.ui_nearby_uv_protection_badge', 'content') }}"
    tap_action:
      action: more-info

  # Air Quality
  - type: custom:mushroom-template-badge
    entity: sensor.waqi_nearby_aqi
    icon: mdi:cloud
    color: "{{ state_attr('sensor.ui_waqi_nearby_aqi_badge', 'color') }}"
    content: "{{ state_attr('sensor.ui_waqi_nearby_aqi_badge', 'content') }}"
    tap_action:
      action: more-info

  # Weather Alerts
  - type: custom:mushroom-template-badge
    entity: sensor.nws_alerts_alerts
    icon: mdi:weather-lightning
    color: "{{ state_attr('sensor.ui_nws_alerts_alerts_badge', 'color') }}"
    content: "{{ state_attr('sensor.ui_nws_alerts_alerts_badge', 'content') }}"
    tap_action:
      action: more-info

  # UV Index
  - type: custom:mushroom-template-badge
    entity: sensor.nearby_uv_index
    icon: mdi:weather-sunny-alert
    color: "{{ state_attr('sensor.ui_nearby_uv_index_badge', 'color') }}"
    content: "{{ state_attr('sensor.ui_nearby_uv_index_badge', 'content') }}"
    tap_action:
      action: more-info

  # Safe Exposure Time
  - type: custom:mushroom-template-badge
    entity: sensor.nearby_safe_exposure_minutes_st1
    icon: mdi:sun-clock
    color: "{{ state_attr('sensor.ui_nearby_safe_exposure_minutes_st1_badge', 'color') }}"
    content: "{{ state_attr('sensor.ui_nearby_safe_exposure_minutes_st1_badge', 'content') }}"
    tap_action:
      action: more-info

  # Vitamin D
  - type: custom:mushroom-template-badge
    entity: sensor.nearby_uv_index
    icon: mdi:pill
    color: "{{ state_attr('sensor.ui_nearby_uv_index_vitamin_d_badge', 'color') }}"
    content: "{{ state_attr('sensor.ui_nearby_uv_index_vitamin_d_badge', 'content') }}"
    tap_action:
      action: more-info

sections:
  - type: grid
    column_span: 1
    cards:

      # Local Weather
      - type: vertical-stack
        cards:

          # Local Weather
          - type: custom:mushroom-title-card
            title: Local Weather

          # Current + Hourly Forecast
          - type: custom:clock-weather-card
            entity: weather.openmeteo_weather_nearby
            show_humidity: true
            forecast_type: hourly
            temperature_sensor: sensor.local_temperature
            humidity_sensor: sensor.local_humidity
            apparent_sensor: sensor.nearby_apparent_temperature
            aqi_sensor: sensor.waqi_nearby_aqi

          # Hourly Forecast Grid
          - type: custom:hourly-weather
            entity: weather.openmeteo_weather_nearby
            name: null
            show_precipitation_amounts: true
            show_precipitation_probability: true
            show_wind: "true"
            grid_options:
              columns: 12
              rows: 2

      # RV Weather
      - type: vertical-stack
        visibility:
          - condition: state
            entity: sensor.user_context
            state_not: rv
          - condition: state
            entity: binary_sensor.rv_near_home
            state: 'off'
        cards:
          - type: custom:mushroom-title-card
            title: RV Weather
          - show_current: true
            show_forecast: true
            type: weather-forecast
            entity: weather.openmeteo_weather_rv
            forecast_type: daily
            secondary_info_attribute: apparent_temperature
            name: ' '

      # Home Weather
      - type: vertical-stack
        visibility:
          - condition: state
            entity: sensor.user_context
            state_not: home
        cards:
          - type: custom:mushroom-title-card
            title: Home Weather
          - show_current: true
            show_forecast: true
            type: weather-forecast
            entity: weather.openmeteo_weather_home
            forecast_type: daily
            name: ' '
            secondary_info_attribute: apparent_temperature

  - type: grid
    cards:

      - type: vertical-stack
        cards:

          # Local Pollen
          - type: custom:mushroom-title-card
            title: Local Pollen

          # Today's Pollen Summary
          - type: horizontal-stack
            cards:

              # Dominant Pollen Category
              - type: custom:mushroom-template-card
                entity: sensor.google_pollen_nearby_today
                icon: mdi:flower-pollen-outline
                primary: "{{ state_attr('sensor.ui_google_pollen_nearby_today', 'primary') }}"
                secondary: "{{ state_attr('sensor.ui_google_pollen_nearby_today', 'secondary') }}"
                icon_color: "{{ state_attr('sensor.ui_google_pollen_nearby_today', 'icon_color') }}"
                fill_container: false
                multiline_secondary: false
                tap_action:
                  action: more-info

              # Dominant Pollen Species
              - type: custom:mushroom-template-card
                entity: sensor.pollen_species_nearby_today
                icon: mdi:sprout
                primary: Dominant Species
                picture: "{{- state_attr('sensor.pollen_species_nearby_today', 'entity_picture') -}}"
                secondary: "{{- states('sensor.pollen_species_nearby_today') -}}"
                tap_action:
                  action: more-info

          # Individual Pollen Categories
          - type: horizontal-stack
            cards:

              # Grass pollen levels
              - type: custom:mushroom-template-card
                entity: sensor.google_pollen_nearby_today
                icon: mdi:grass
                primary: Grass
                secondary: "{{ state_attr('sensor.ui_google_pollen_nearby_today_grass', 'secondary') }}"
                icon_color: "{{ state_attr('sensor.ui_google_pollen_nearby_today_grass', 'icon_color') }}"
                tap_action:
                  action: more-info

              # Tree pollen levels
              - type: custom:mushroom-template-card
                entity: sensor.google_pollen_nearby_today
                icon: mdi:tree
                primary: Tree
                secondary: "{{ state_attr('sensor.ui_google_pollen_nearby_today_tree', 'secondary') }}"
                icon_color: "{{ state_attr('sensor.ui_google_pollen_nearby_today_tree', 'icon_color') }}"
                tap_action:
                  action: more-info

              # Weed pollen levels
              - type: custom:mushroom-template-card
                entity: sensor.google_pollen_nearby_today
                icon: mdi:sprout
                primary: Weed
                secondary: "{{ state_attr('sensor.ui_google_pollen_nearby_today_weed', 'secondary') }}"
                icon_color: "{{ state_attr('sensor.ui_google_pollen_nearby_today_weed', 'icon_color') }}"
                tap_action:
                  action: more-info

          # Health Advice
          - type: custom:mushroom-template-card
            entity: sensor.google_pollen_nearby_today
            icon: mdi:heart-pulse
            primary: Health Advice
            multiline_secondary: true
            secondary: "{{ state_attr('sensor.ui_google_pollen_nearby_today_advice', 'secondary') }}"
            icon_color: "{{ state_attr('sensor.ui_google_pollen_nearby_today_advice', 'icon_color') }}"
            tap_action:
              action: more-info

          # 3-Day Pollen Forecast
          - type: horizontal-stack
            cards:

              # Day 0 Forecast
              - type: custom:mushroom-template-card
                entity: sensor.pollen_forecast_nearby_day_0
                icon: "{{ state_attr('sensor.ui_pollen_forecast_nearby_day_0', 'icon') }}"
                primary: "{{ state_attr('sensor.ui_pollen_forecast_nearby_day_0', 'primary') }}"
                secondary: "{{ state_attr('sensor.ui_pollen_forecast_nearby_day_0', 'secondary') }}"
                icon_color: "{{ state_attr('sensor.ui_pollen_forecast_nearby_day_0', 'icon_color') }}"
                tap_action:
                  action: more-info

              # Day 1 Forecast
              - type: custom:mushroom-template-card
                entity: sensor.pollen_forecast_nearby_day_1
                icon: "{{ state_attr('sensor.ui_pollen_forecast_nearby_day_1', 'icon') }}"
                primary: "{{ state_attr('sensor.ui_pollen_forecast_nearby_day_1', 'primary') }}"
                secondary: "{{ state_attr('sensor.ui_pollen_forecast_nearby_day_1', 'secondary') }}"
                icon_color: "{{ state_attr('sensor.ui_pollen_forecast_nearby_day_1', 'icon_color') }}"
                tap_action:
                  action: more-info

              # Day 2 Forecast
              - type: custom:mushroom-template-card
                entity: sensor.pollen_forecast_nearby_day_2
                icon: "{{ state_attr('sensor.ui_pollen_forecast_nearby_day_2', 'icon') }}"
                primary: "{{ state_attr('sensor.ui_pollen_forecast_nearby_day_2', 'primary') }}"
                secondary: "{{ state_attr('sensor.ui_pollen_forecast_nearby_day_2', 'secondary') }}"
                icon_color: "{{ state_attr('sensor.ui_pollen_forecast_nearby_day_2', 'icon_color') }}"
                tap_action:
                  action: more-info

      # Home Pollen
      - type: vertical-stack
        visibility:
          - condition: state
            entity: sensor.user_context
            state_not: home
        cards:

          # Home Pollen
          - type: custom:mushroom-title-card
            title: Home Pollen

          - type: horizontal-stack
            cards:

              # Day 0 Forecast
              - type: custom:mushroom-template-card
                entity: sensor.pollen_forecast_home_day_0
                icon: "{{ state_attr('sensor.ui_pollen_forecast_home_day_0', 'icon') }}"
                primary: "{{ state_attr('sensor.ui_pollen_forecast_home_day_0', 'primary') }}"
                secondary: "{{ state_attr('sensor.ui_pollen_forecast_home_day_0', 'secondary') }}"
                icon_color: "{{ state_attr('sensor.ui_pollen_forecast_home_day_0', 'icon_color') }}"
                tap_action:
                  action: more-info

              # Day 1 Forecast
              - type: custom:mushroom-template-card
                entity: sensor.pollen_forecast_home_day_1
                icon: "{{ state_attr('sensor.ui_pollen_forecast_home_day_1', 'icon') }}"
                primary: "{{ state_attr('sensor.ui_pollen_forecast_home_day_1', 'primary') }}"
                secondary: "{{ state_attr('sensor.ui_pollen_forecast_home_day_1', 'secondary') }}"
                icon_color: "{{ state_attr('sensor.ui_pollen_forecast_home_day_1', 'icon_color') }}"
                tap_action:
                  action: more-info

              # Day 2 Forecast
              - type: custom:mushroom-template-card
                entity: sensor.pollen_forecast_home_day_2
                icon: "{{ state_attr('sensor.ui_pollen_forecast_home_day_2', 'icon') }}"
                primary: "{{ state_attr('sensor.ui_pollen_forecast_home_day_2', 'primary') }}"
                secondary: "{{ state_attr('sensor.ui_pollen_forecast_home_day_2', 'secondary') }}"
                icon_color: "{{ state_attr('sensor.ui_pollen_forecast_home_day_2', 'icon_color') }}"
                tap_action:
                  action: more-info

      # RV Pollen
      - type: vertical-stack
        visibility:
          - condition: state
            entity: sensor.user_context
            state_not: rv
          - condition: state
            entity: binary_sensor.rv_near_home
            state: 'off'
        cards:

          # RV Pollen
          - type: custom:mushroom-title-card
            title: RV Pollen

          - type: horizontal-stack
            cards:

              # Day 0 Forecast
              - type: custom:mushroom-template-card
                entity: sensor.pollen_forecast_rv_day_0
                icon: "{{ state_attr('sensor.ui_pollen_forecast_rv_day_0', 'icon') }}"
                primary: "{{ state_attr('sensor.ui_pollen_forecast_rv_day_0', 'primary') }}"
                secondary: "{{ state_attr('sensor.ui_pollen_forecast_rv_day_0', 'secondary') }}"
                icon_color: "{{ state_attr('sensor.ui_pollen_forecast_rv_day_0', 'icon_color') }}"
                tap_action:
                  action: more-info

              # Day 1 Forecast
              - type: custom:mushroom-template-card
                entity: sensor.pollen_forecast_rv_day_1
                icon: "{{ state_attr('sensor.ui_pollen_forecast_rv_day_1', 'icon') }}"
                primary: "{{ state_attr('sensor.ui_pollen_forecast_rv_day_1', 'primary') }}"
                secondary: "{{ state_attr('sensor.ui_pollen_forecast_rv_day_1', 'secondary') }}"
                icon_color: "{{ state_attr('sensor.ui_pollen_forecast_rv_day_1', 'icon_color') }}"
                tap_action:
                  action: more-info

              # Day 2 Forecast
              - type: custom:mushroom-template-card
                entity: sensor.pollen_forecast_rv_day_2
                icon: "{{ state_attr('sensor.ui_pollen_forecast_rv_day_2', 'icon') }}"
                primary: "{{ state_attr('sensor.ui_pollen_forecast_rv_day_2', 'primary') }}"
                secondary: "{{ state_attr('sensor.ui_pollen_forecast_rv_day_2', 'secondary') }}"
                icon_color: "{{ state_attr('sensor.ui_pollen_forecast_rv_day_2', 'icon_color') }}"
                tap_action:
                  action: more-info

      - type: vertical-stack
        cards:

          # Outdoor Thermometer
          - type: custom:mushroom-title-card
            title: Outdoor Thermometer

          # Temperature and Humidity
          - square: false
            type: grid
            cards:

              # Current Temperature
              - type: custom:decluttering-card
                template: ui_template_card
                variables:
                  - entity: sensor.outside_temperature_state
                  - ui_entity: sensor.ui_outside_temperature_state
                  - name: Temp
                  - app: ambient

              # Recent High Temperature
              - type: custom:mushroom-template-card
                entity: sensor.high_temperature
                primary: High
                icon: mdi:thermometer-chevron-up
                secondary: "{{ state_attr('sensor.ui_high_temperature', 'secondary') }}"
                icon_color: "{{ state_attr('sensor.ui_high_temperature', 'icon_color') }}"
                tap_action:
                  action: more-info

              # All-time High Temperature
              - type: custom:mushroom-template-card
                entity: sensor.high_temperature_all_time
                primary: Rec High
                secondary: "{{ state_attr('sensor.ui_high_temperature_all_time', 'secondary') }}"
                icon: mdi:fire
                icon_color: red
                tap_action:
                  action: more-info

              # Current Humidity
              - type: custom:decluttering-card
                template: ui_template_card
                variables:
                  - entity: sensor.outside_humidity_state
                  - ui_entity: sensor.ui_outside_humidity_state
                  - name: Humidity
                  - app: outdoor

              # Recent Low Temperature
              - type: custom:mushroom-template-card
                entity: sensor.low_temperature
                primary: Low
                icon: mdi:thermometer-chevron-down
                secondary: "{{ state_attr('sensor.ui_low_temperature', 'secondary') }}"
                icon_color: "{{ state_attr('sensor.ui_low_temperature', 'icon_color') }}"
                tap_action:
                  action: more-info

              # All-time Low Temperature
              - type: custom:mushroom-template-card
                entity: sensor.low_temperature_all_time
                primary: Rec Low
                secondary: "{{ state_attr('sensor.ui_low_temperature_all_time', 'secondary') }}"
                icon: mdi:snowflake
                icon_color: blue
                tap_action:
                  action: more-info

      - type: vertical-stack
        cards:

          - type: custom:mushroom-title-card
            title: Agromonitoring

          - type: grid
            square: false
            cards:

              # Soil Surface Temperature
              - type: custom:mushroom-template-card
                entity: sensor.soil_surface_temperature
                primary: Surf Temp
                icon: mdi:thermometer
                secondary: "{{ state_attr('sensor.ui_soil_surface_temperature', 'secondary') }}"
                icon_color: "{{ state_attr('sensor.ui_soil_surface_temperature', 'icon_color') }}"
                tap_action:
                  action: more-info

              # Soil Temperature at 10cm
              - type: custom:mushroom-template-card
                entity: sensor.soil_temperature_at_10cm
                primary: Depth10
                icon: mdi:thermometer-lines
                secondary: "{{ state_attr('sensor.ui_soil_temperature_at_10cm', 'secondary') }}"
                icon_color: "{{ state_attr('sensor.ui_soil_temperature_at_10cm', 'icon_color') }}"
                tap_action:
                  action: more-info

              # Soil Moisture
              - type: custom:mushroom-template-card
                entity: sensor.soil_moisture
                primary: Moisture
                icon: mdi:water-percent
                secondary: "{{ state_attr('sensor.ui_soil_moisture', 'secondary') }}"
                icon_color: "{{ state_attr('sensor.ui_soil_moisture', 'icon_color') }}"
                tap_action:
                  action: more-info

  - type: grid
    cards:
      - type: custom:mushroom-title-card
        title: Local Air Quality
      - type: custom:modern-circular-gauge
        entity: sensor.waqi_nearby_aqi
        name: "{{ state_attr('sensor.ui_waqi_nearby_aqi_gauge', 'name') }}"
        max: 500
        adaptive_state_color: true
        segments:
          - from: 0
            color: "{{ state_attr('sensor.ui_waqi_nearby_aqi_gauge', 'color_0') }}"
            label: "{{ state_attr('sensor.ui_waqi_nearby_aqi_gauge', 'label_0') }}"
          - from: 51
            color: "{{ state_attr('sensor.ui_waqi_nearby_aqi_gauge', 'color_51') }}"
            label: "{{ state_attr('sensor.ui_waqi_nearby_aqi_gauge', 'label_51') }}"
          - from: 101
            color: "{{ state_attr('sensor.ui_waqi_nearby_aqi_gauge', 'color_101') }}"
            label: "{{ state_attr('sensor.ui_waqi_nearby_aqi_gauge', 'label_101') }}"
          - from: 151
            color: "{{ state_attr('sensor.ui_waqi_nearby_aqi_gauge', 'color_151') }}"
            label: "{{ state_attr('sensor.ui_waqi_nearby_aqi_gauge', 'label_151') }}"
          - from: 201
            color: "{{ state_attr('sensor.ui_waqi_nearby_aqi_gauge', 'color_201') }}"
            label: "{{ state_attr('sensor.ui_waqi_nearby_aqi_gauge', 'label_201') }}"
          - from: 301
            color: "{{ state_attr('sensor.ui_waqi_nearby_aqi_gauge', 'color_301') }}"
            label: "{{ state_attr('sensor.ui_waqi_nearby_aqi_gauge', 'label_301') }}"
        secondary:
          unit: AQI
          show_gauge: none
          entity: sensor.waqi_nearby_aqi
        gauge_foreground_style:
          width: 10
        needle: true
        grid_options:
          columns: 12
          rows: 4
        tertiary: {}
      - type: custom:mushroom-chips-card
        alignment: center
        chips:
          - type: template
            entity: sensor.waqi_nearby_pm2_5
            icon: mdi:blur
            icon_color: "{{ state_attr('sensor.ui_waqi_nearby_pm2_5_chip', 'icon_color') }}"
            tap_action:
              action: more-info
          - type: template
            entity: sensor.waqi_nearby_pm10
            icon: mdi:blur-radial
            icon_color: "{{ state_attr('sensor.ui_waqi_nearby_pm10_chip', 'icon_color') }}"
            tap_action:
              action: more-info
          - type: template
            entity: sensor.waqi_nearby_o3
            icon: mdi:chemical-weapon
            icon_color: "{{ state_attr('sensor.ui_waqi_nearby_o3_chip', 'icon_color') }}"
            tap_action:
              action: more-info
          - type: template
            entity: sensor.waqi_nearby_co
            icon: mdi:molecule-co
            icon_color: "{{ state_attr('sensor.ui_waqi_nearby_co_chip', 'icon_color') }}"
            tap_action:
              action: more-info
          - type: template
            entity: sensor.waqi_nearby_no2
            icon: mdi:periodic-table
            icon_color: "{{ state_attr('sensor.ui_waqi_nearby_no2_chip', 'icon_color') }}"
            tap_action:
              action: more-info
          - type: template
            entity: sensor.waqi_nearby_so2
            icon: mdi:factory
            icon_color: "{{ state_attr('sensor.ui_waqi_nearby_so2_chip', 'icon_color') }}"
            tap_action:
              action: more-info
      - type: custom:mushroom-template-card
        entity: sensor.waqi_nearby_aqi
        icon: "{{ state_attr('sensor.ui_waqi_nearby_aqi', 'icon') }}"
        primary: Health Advice
        secondary: "{{ state_attr('sensor.ui_waqi_nearby_aqi', 'full_desc') }}"
        multiline_secondary: true
        icon_color: "{{ state_attr('sensor.ui_waqi_nearby_aqi', 'icon_color') }}"
        grid_options:
          columns: full
          rows: 2
        tap_action:
          action: more-info
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-template-card
            entity: sensor.aqi_forecast_nearby_day_0
            primary: "{{- state_attr('sensor.aqi_forecast_nearby_day_0', 'title') -}}"
            secondary: "{{ states('sensor.aqi_forecast_nearby_day_0') }}"
            icon_color: "{{ state_attr('sensor.aqi_forecast_nearby_day_0', 'hex') }}"
            badge_icon: "{{ state_attr('sensor.aqi_forecast_nearby_day_0', 'badge') }}"
            icon: "{{ state_attr('sensor.aqi_forecast_nearby_day_0', 'icon') }}"
            badge_color: "{{ state_attr('sensor.aqi_forecast_nearby_day_0', 'hex') }}"
            tap_action:
              action: more-info
          - type: custom:mushroom-template-card
            entity: sensor.aqi_forecast_nearby_day_1
            primary: "{{- state_attr('sensor.aqi_forecast_nearby_day_1', 'title') -}}"
            secondary: "{{ states('sensor.aqi_forecast_nearby_day_1') }}"
            icon_color: "{{ state_attr('sensor.aqi_forecast_nearby_day_1', 'hex') }}"
            badge_icon: "{{ state_attr('sensor.aqi_forecast_nearby_day_1', 'badge') }}"
            icon: "{{ state_attr('sensor.aqi_forecast_nearby_day_1', 'icon') }}"
            badge_color: "{{ state_attr('sensor.aqi_forecast_nearby_day_1', 'hex') }}"
            tap_action:
              action: more-info
          - type: custom:mushroom-template-card
            entity: sensor.aqi_forecast_nearby_day_2
            primary: "{{- state_attr('sensor.aqi_forecast_nearby_day_2', 'title') -}}"
            secondary: "{{ states('sensor.aqi_forecast_nearby_day_2') }}"
            icon_color: "{{ state_attr('sensor.aqi_forecast_nearby_day_2', 'hex') }}"
            badge_icon: "{{ state_attr('sensor.aqi_forecast_nearby_day_2', 'badge') }}"
            icon: "{{ state_attr('sensor.aqi_forecast_nearby_day_2', 'icon') }}"
            badge_color: "{{ state_attr('sensor.aqi_forecast_nearby_day_2', 'hex') }}"
            tap_action:
              action: more-info
      - type: vertical-stack
        visibility:
          - condition: state
            entity: sensor.user_context
            state_not: home
        cards:
          - type: custom:mushroom-title-card
            title: Home Air Quality
          - type: horizontal-stack
            cards:
              - type: custom:modern-circular-gauge
                entity: sensor.waqi_home_aqi
                name: "{{ state_attr('sensor.ui_waqi_home_aqi_gauge', 'name') }}"
                max: 500
                adaptive_state_color: true
                segments:
                  - from: 0
                    color: "{{ state_attr('sensor.ui_waqi_home_aqi_gauge', 'color_0') }}"
                    label: "{{ state_attr('sensor.ui_waqi_home_aqi_gauge', 'label_0') }}"
                  - from: 51
                    color: "{{ state_attr('sensor.ui_waqi_home_aqi_gauge', 'color_51') }}"
                    label: "{{ state_attr('sensor.ui_waqi_home_aqi_gauge', 'label_51') }}"
                  - from: 101
                    color: "{{ state_attr('sensor.ui_waqi_home_aqi_gauge', 'color_101') }}"
                    label: "{{ state_attr('sensor.ui_waqi_home_aqi_gauge', 'label_101') }}"
                  - from: 151
                    color: "{{ state_attr('sensor.ui_waqi_home_aqi_gauge', 'color_151') }}"
                    label: "{{ state_attr('sensor.ui_waqi_home_aqi_gauge', 'label_151') }}"
                  - from: 201
                    color: "{{ state_attr('sensor.ui_waqi_home_aqi_gauge', 'color_201') }}"
                    label: "{{ state_attr('sensor.ui_waqi_home_aqi_gauge', 'label_201') }}"
                  - from: 301
                    color: "{{ state_attr('sensor.ui_waqi_home_aqi_gauge', 'color_301') }}"
                    label: "{{ state_attr('sensor.ui_waqi_home_aqi_gauge', 'label_301') }}"
                secondary:
                  unit: AQI
                  show_gauge: none
                  entity: sensor.waqi_home_aqi
                gauge_foreground_style:
                  width: 10
                needle: true
                grid_options:
                  columns: 12
                  rows: 4
                tertiary: {}
              - type: vertical-stack
                cards:
                  - type: custom:mushroom-template-card
                    entity: sensor.aqi_forecast_home_day_0
                    primary: "{{- state_attr('sensor.aqi_forecast_home_day_0', 'title') -}}"
                    secondary: "{{ states('sensor.aqi_forecast_home_day_0') }}"
                    icon_color: "{{ state_attr('sensor.aqi_forecast_home_day_0', 'hex') }}"
                    badge_icon: "{{ state_attr('sensor.aqi_forecast_home_day_0', 'badge') }}"
                    icon: "{{ state_attr('sensor.aqi_forecast_home_day_0', 'icon') }}"
                    badge_color: "{{ state_attr('sensor.aqi_forecast_home_day_0', 'hex') }}"
                    tap_action:
                      action: more-info
                  - type: custom:mushroom-template-card
                    entity: sensor.aqi_forecast_home_day_1
                    primary: "{{- state_attr('sensor.aqi_forecast_home_day_1', 'title') -}}"
                    secondary: "{{ states('sensor.aqi_forecast_home_day_1') }}"
                    icon_color: "{{ state_attr('sensor.aqi_forecast_home_day_1', 'hex') }}"
                    badge_icon: "{{ state_attr('sensor.aqi_forecast_home_day_1', 'badge') }}"
                    icon: "{{ state_attr('sensor.aqi_forecast_home_day_1', 'icon') }}"
                    badge_color: "{{ state_attr('sensor.aqi_forecast_home_day_1', 'hex') }}"
                    tap_action:
                      action: more-info
                  - type: custom:mushroom-template-card
                    entity: sensor.aqi_forecast_home_day_2
                    primary: "{{- state_attr('sensor.aqi_forecast_home_day_2', 'title') -}}"
                    secondary: "{{ states('sensor.aqi_forecast_home_day_2') }}"
                    icon_color: "{{ state_attr('sensor.aqi_forecast_home_day_2', 'hex') }}"
                    badge_icon: "{{ state_attr('sensor.aqi_forecast_home_day_2', 'badge') }}"
                    icon: "{{ state_attr('sensor.aqi_forecast_home_day_2', 'icon') }}"
                    badge_color: "{{ state_attr('sensor.aqi_forecast_home_day_2', 'hex') }}"
                    tap_action:
                      action: more-info
      - type: vertical-stack
        visibility:
          - condition: state
            entity: sensor.user_context
            state_not: rv
          - condition: state
            entity: binary_sensor.rv_near_home
            state: 'off'
        cards:
          - type: custom:mushroom-title-card
            title: RV Air Quality
          - type: horizontal-stack
            cards:
              - type: custom:modern-circular-gauge
                entity: sensor.waqi_rv_aqi
                name: "{{ state_attr('sensor.ui_waqi_rv_aqi_gauge', 'name') }}"
                max: 500
                adaptive_state_color: true
                segments:
                  - from: 0
                    color: "{{ state_attr('sensor.ui_waqi_rv_aqi_gauge', 'color_0') }}"
                    label: "{{ state_attr('sensor.ui_waqi_rv_aqi_gauge', 'label_0') }}"
                  - from: 51
                    color: "{{ state_attr('sensor.ui_waqi_rv_aqi_gauge', 'color_51') }}"
                    label: "{{ state_attr('sensor.ui_waqi_rv_aqi_gauge', 'label_51') }}"
                  - from: 101
                    color: "{{ state_attr('sensor.ui_waqi_rv_aqi_gauge', 'color_101') }}"
                    label: "{{ state_attr('sensor.ui_waqi_rv_aqi_gauge', 'label_101') }}"
                  - from: 151
                    color: "{{ state_attr('sensor.ui_waqi_rv_aqi_gauge', 'color_151') }}"
                    label: "{{ state_attr('sensor.ui_waqi_rv_aqi_gauge', 'label_151') }}"
                  - from: 201
                    color: "{{ state_attr('sensor.ui_waqi_rv_aqi_gauge', 'color_201') }}"
                    label: "{{ state_attr('sensor.ui_waqi_rv_aqi_gauge', 'label_201') }}"
                  - from: 301
                    color: "{{ state_attr('sensor.ui_waqi_rv_aqi_gauge', 'color_301') }}"
                    label: "{{ state_attr('sensor.ui_waqi_rv_aqi_gauge', 'label_301') }}"
                secondary:
                  unit: AQI
                  show_gauge: none
                  entity: sensor.waqi_rv_aqi
                gauge_foreground_style:
                  width: 10
                needle: true
                grid_options:
                  columns: 12
                  rows: 4
                tertiary: {}
              - type: vertical-stack
                cards:
                  - type: custom:mushroom-template-card
                    entity: sensor.aqi_forecast_rv_day_0
                    primary: "{{- state_attr('sensor.aqi_forecast_rv_day_0', 'title') -}}"
                    secondary: "{{ states('sensor.aqi_forecast_rv_day_0') }}"
                    icon_color: "{{ state_attr('sensor.aqi_forecast_rv_day_0', 'hex') }}"
                    badge_icon: "{{ state_attr('sensor.aqi_forecast_rv_day_0', 'badge') }}"
                    icon: "{{ state_attr('sensor.aqi_forecast_rv_day_0', 'icon') }}"
                    badge_color: "{{ state_attr('sensor.aqi_forecast_rv_day_0', 'hex') }}"
                    tap_action:
                      action: more-info
                  - type: custom:mushroom-template-card
                    entity: sensor.aqi_forecast_rv_day_1
                    primary: "{{- state_attr('sensor.aqi_forecast_rv_day_1', 'title') -}}"
                    secondary: "{{ states('sensor.aqi_forecast_rv_day_1') }}"
                    icon_color: "{{ state_attr('sensor.aqi_forecast_rv_day_1', 'hex') }}"
                    badge_icon: "{{ state_attr('sensor.aqi_forecast_rv_day_1', 'badge') }}"
                    icon: "{{ state_attr('sensor.aqi_forecast_rv_day_1', 'icon') }}"
                    badge_color: "{{ state_attr('sensor.aqi_forecast_rv_day_1', 'hex') }}"
                    tap_action:
                      action: more-info
                  - type: custom:mushroom-template-card
                    entity: sensor.aqi_forecast_rv_day_2
                    primary: "{{- state_attr('sensor.aqi_forecast_rv_day_2', 'title') -}}"
                    secondary: "{{ states('sensor.aqi_forecast_rv_day_2') }}"
                    icon_color: "{{ state_attr('sensor.aqi_forecast_rv_day_2', 'hex') }}"
                    badge_icon: "{{ state_attr('sensor.aqi_forecast_rv_day_2', 'badge') }}"
                    icon: "{{ state_attr('sensor.aqi_forecast_rv_day_2', 'icon') }}"
                    badge_color: "{{ state_attr('sensor.aqi_forecast_rv_day_2', 'hex') }}"
                    tap_action:
                      action: more-info
  - type: grid
    cards:
      - type: custom:mushroom-title-card
        title: Local UV Index & Exposure
      - type: custom:modern-circular-gauge
        name: ""
        unit: ""
        icon: mdi:white-balance-sunny
        adaptive_state_color: true
        entity: sensor.nearby_uv_index
        max: 11
        segments:
          - from: 0
            color: "{{ state_attr('sensor.ui_nearby_uv_index_gauge', 'color_0') }}"
            label: "{{ state_attr('sensor.ui_nearby_uv_index_gauge', 'label_0') }}"
          - from: 2
            color: "{{ state_attr('sensor.ui_nearby_uv_index_gauge', 'color_2') }}"
            label: "{{ state_attr('sensor.ui_nearby_uv_index_gauge', 'label_2') }}"
          - from: 5
            color: "{{ state_attr('sensor.ui_nearby_uv_index_gauge', 'color_5') }}"
            label: "{{ state_attr('sensor.ui_nearby_uv_index_gauge', 'label_5') }}"
          - from: 7
            color: "{{ state_attr('sensor.ui_nearby_uv_index_gauge', 'color_7') }}"
            label: "{{ state_attr('sensor.ui_nearby_uv_index_gauge', 'label_7') }}"
          - from: 10
            color: "{{ state_attr('sensor.ui_nearby_uv_index_gauge', 'color_10') }}"
            label: "{{ state_attr('sensor.ui_nearby_uv_index_gauge', 'label_10') }}"
        secondary:
          show_gauge: none
          unit: UVI
          entity: sensor.nearby_uv_index
        gauge_foreground_style:
          width: 10
        needle: true
        grid_options:
          columns: 12
          rows: 4
        tertiary: {}
      - type: custom:mushroom-chips-card
        chips:
          - type: template
            entity: sensor.nearby_today_uv_index_max
            icon: mdi:weather-sunny-alert
            content: "{{ state_attr('sensor.ui_nearby_today_uv_index_max_chip', 'content') }}"
            icon_color: "{{ state_attr('sensor.ui_nearby_today_uv_index_max_chip', 'icon_color') }}"
            tap_action:
              action: more-info
          - type: template
            entity: sensor.nearby_safe_exposure_minutes_st1
            icon: mdi:timer-sand
            content: "{{ state_attr('sensor.ui_nearby_safe_exposure_minutes_st1', 'content') }}"
            icon_color: "{{ state_attr('sensor.ui_nearby_safe_exposure_minutes_st1', 'icon_color') }}"
            tap_action:
              action: more-info
        alignment: center
      - type: custom:mushroom-template-card
        entity: sensor.nearby_uv_index
        primary: Health Advice
        icon: "{{ state_attr('sensor.ui_nearby_uv_index', 'icon') }}"
        secondary: "{{ state_attr('sensor.ui_nearby_uv_index', 'full_desc') }}"
        icon_color: "{{ state_attr('sensor.ui_nearby_uv_index', 'color') }}"
        multiline_secondary: true
        grid_options:
          columns: full
          rows: 2
        tap_action:
          action: more-info
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-template-card
            entity: sensor.openmeteo_nearby
            primary: "{{ state_attr('sensor.ui_nearby_today_uv_index_max', 'primary') }}"
            secondary: "{{ state_attr('sensor.ui_nearby_today_uv_index_max', 'secondary') }}"
            icon: "{{ state_attr('sensor.ui_nearby_today_uv_index_max', 'icon') }}"
            icon_color: "{{ state_attr('sensor.ui_nearby_today_uv_index_max', 'icon_color') }}"
            badge_icon: "{{ state_attr('sensor.ui_nearby_today_uv_index_max', 'badge_icon') }}"
            badge_color: "{{ state_attr('sensor.ui_nearby_today_uv_index_max', 'badge_color') }}"
            tap_action:
              action: more-info
          - type: custom:mushroom-template-card
            entity: sensor.openmeteo_nearby
            primary: "{{ state_attr('sensor.ui_nearby_tomorrow_uv_index_max', 'primary') }}"
            secondary: "{{ state_attr('sensor.ui_nearby_tomorrow_uv_index_max', 'secondary') }}"
            icon: "{{ state_attr('sensor.ui_nearby_tomorrow_uv_index_max', 'icon') }}"
            icon_color: "{{ state_attr('sensor.ui_nearby_tomorrow_uv_index_max', 'icon_color') }}"
            badge_icon: "{{ state_attr('sensor.ui_nearby_tomorrow_uv_index_max', 'badge_icon') }}"
            badge_color: "{{ state_attr('sensor.ui_nearby_tomorrow_uv_index_max', 'badge_color') }}"
            tap_action:
              action: more-info
          - type: custom:mushroom-template-card
            entity: sensor.openmeteo_nearby
            primary: "{{ state_attr('sensor.ui_nearby_day_2_uv_index_max', 'primary') }}"
            secondary: "{{ state_attr('sensor.ui_nearby_day_2_uv_index_max', 'secondary') }}"
            icon: "{{ state_attr('sensor.ui_nearby_day_2_uv_index_max', 'icon') }}"
            icon_color: "{{ state_attr('sensor.ui_nearby_day_2_uv_index_max', 'icon_color') }}"
            badge_icon: "{{ state_attr('sensor.ui_nearby_day_2_uv_index_max', 'badge_icon') }}"
            badge_color: "{{ state_attr('sensor.ui_nearby_day_2_uv_index_max', 'badge_color') }}"
            tap_action:
              action: more-info
      - type: vertical-stack
        visibility:
          - condition: state
            entity: sensor.user_context
            state_not: home
        cards:
          - type: custom:mushroom-title-card
            title: Home UV Index & Forecast
          - type: horizontal-stack
            cards:
              - type: custom:modern-circular-gauge
                name: ""
                unit: ""
                icon: mdi:white-balance-sunny
                adaptive_state_color: true
                entity: sensor.home_uv_index
                max: 11
                segments:
                  - from: 0
                    color: "{{ state_attr('sensor.ui_home_uv_index_gauge', 'color_0') }}"
                    label: "{{ state_attr('sensor.ui_home_uv_index_gauge', 'label_0') }}"
                  - from: 2
                    color: "{{ state_attr('sensor.ui_home_uv_index_gauge', 'color_2') }}"
                    label: "{{ state_attr('sensor.ui_home_uv_index_gauge', 'label_2') }}"
                  - from: 5
                    color: "{{ state_attr('sensor.ui_home_uv_index_gauge', 'color_5') }}"
                    label: "{{ state_attr('sensor.ui_home_uv_index_gauge', 'label_5') }}"
                  - from: 7
                    color: "{{ state_attr('sensor.ui_home_uv_index_gauge', 'color_7') }}"
                    label: "{{ state_attr('sensor.ui_home_uv_index_gauge', 'label_7') }}"
                  - from: 10
                    color: "{{ state_attr('sensor.ui_home_uv_index_gauge', 'color_10') }}"
                    label: "{{ state_attr('sensor.ui_home_uv_index_gauge', 'label_10') }}"
                secondary:
                  show_gauge: none
                  unit: UVI
                  entity: sensor.home_uv_index
                gauge_foreground_style:
                  width: 10
                needle: true
                grid_options:
                  columns: 12
                  rows: 4
                tertiary: {}
              - type: vertical-stack
                cards:
                  - type: custom:mushroom-template-card
                    entity: sensor.openmeteo_home
                    primary: "{{ state_attr('sensor.ui_home_today_uv_index_max', 'primary') }}"
                    secondary: "{{ state_attr('sensor.ui_home_today_uv_index_max', 'secondary') }}"
                    icon: "{{ state_attr('sensor.ui_home_today_uv_index_max', 'icon') }}"
                    icon_color: "{{ state_attr('sensor.ui_home_today_uv_index_max', 'icon_color') }}"
                    badge_icon: "{{ state_attr('sensor.ui_home_today_uv_index_max', 'badge_icon') }}"
                    badge_color: "{{ state_attr('sensor.ui_home_today_uv_index_max', 'badge_color') }}"
                    tap_action:
                      action: more-info
                  - type: custom:mushroom-template-card
                    entity: sensor.openmeteo_home
                    primary: "{{ state_attr('sensor.ui_home_tomorrow_uv_index_max', 'primary') }}"
                    secondary: "{{ state_attr('sensor.ui_home_tomorrow_uv_index_max', 'secondary') }}"
                    icon: "{{ state_attr('sensor.ui_home_tomorrow_uv_index_max', 'icon') }}"
                    icon_color: "{{ state_attr('sensor.ui_home_tomorrow_uv_index_max', 'icon_color') }}"
                    badge_icon: "{{ state_attr('sensor.ui_home_tomorrow_uv_index_max', 'badge_icon') }}"
                    badge_color: "{{ state_attr('sensor.ui_home_tomorrow_uv_index_max', 'badge_color') }}"
                    tap_action:
                      action: more-info
                  - type: custom:mushroom-template-card
                    entity: sensor.openmeteo_home
                    primary: "{{ state_attr('sensor.ui_home_day_2_uv_index_max', 'primary') }}"
                    secondary: "{{ state_attr('sensor.ui_home_day_2_uv_index_max', 'secondary') }}"
                    icon: "{{ state_attr('sensor.ui_home_day_2_uv_index_max', 'icon') }}"
                    icon_color: "{{ state_attr('sensor.ui_home_day_2_uv_index_max', 'icon_color') }}"
                    badge_icon: "{{ state_attr('sensor.ui_home_day_2_uv_index_max', 'badge_icon') }}"
                    badge_color: "{{ state_attr('sensor.ui_home_day_2_uv_index_max', 'badge_color') }}"
                    tap_action:
                      action: more-info
      - type: vertical-stack
        visibility:
          - condition: state
            entity: sensor.user_context
            state_not: rv
          - condition: state
            entity: binary_sensor.rv_near_home
            state: 'off'
        cards:
          - type: custom:mushroom-title-card
            title: RV UV Index & Forecast
          - type: horizontal-stack
            cards:
              - type: custom:modern-circular-gauge
                name: ""
                unit: ""
                icon: mdi:white-balance-sunny
                adaptive_state_color: true
                entity: sensor.rv_uv_index
                max: 11
                segments:
                  - from: 0
                    color: "{{ state_attr('sensor.ui_rv_uv_index_gauge', 'color_0') }}"
                    label: "{{ state_attr('sensor.ui_rv_uv_index_gauge', 'label_0') }}"
                  - from: 2
                    color: "{{ state_attr('sensor.ui_rv_uv_index_gauge', 'color_2') }}"
                    label: "{{ state_attr('sensor.ui_rv_uv_index_gauge', 'label_2') }}"
                  - from: 5
                    color: "{{ state_attr('sensor.ui_rv_uv_index_gauge', 'color_5') }}"
                    label: "{{ state_attr('sensor.ui_rv_uv_index_gauge', 'label_5') }}"
                  - from: 7
                    color: "{{ state_attr('sensor.ui_rv_uv_index_gauge', 'color_7') }}"
                    label: "{{ state_attr('sensor.ui_rv_uv_index_gauge', 'label_7') }}"
                  - from: 10
                    color: "{{ state_attr('sensor.ui_rv_uv_index_gauge', 'color_10') }}"
                    label: "{{ state_attr('sensor.ui_rv_uv_index_gauge', 'label_10') }}"
                secondary:
                  show_gauge: none
                  unit: UVI
                  entity: sensor.rv_uv_index
                gauge_foreground_style:
                  width: 10
                needle: true
                grid_options:
                  columns: 12
                  rows: 4
                tertiary: {}
              - type: vertical-stack
                cards:
                  - type: custom:mushroom-template-card
                    entity: sensor.openmeteo_rv
                    primary: "{{ state_attr('sensor.ui_rv_today_uv_index_max', 'primary') }}"
                    secondary: "{{ state_attr('sensor.ui_rv_today_uv_index_max', 'secondary') }}"
                    icon: "{{ state_attr('sensor.ui_rv_today_uv_index_max', 'icon') }}"
                    icon_color: "{{ state_attr('sensor.ui_rv_today_uv_index_max', 'icon_color') }}"
                    badge_icon: "{{ state_attr('sensor.ui_rv_today_uv_index_max', 'badge_icon') }}"
                    badge_color: "{{ state_attr('sensor.ui_rv_today_uv_index_max', 'badge_color') }}"
                    tap_action:
                      action: more-info
                  - type: custom:mushroom-template-card
                    entity: sensor.openmeteo_rv
                    primary: "{{ state_attr('sensor.ui_rv_tomorrow_uv_index_max', 'primary') }}"
                    secondary: "{{ state_attr('sensor.ui_rv_tomorrow_uv_index_max', 'secondary') }}"
                    icon: "{{ state_attr('sensor.ui_rv_tomorrow_uv_index_max', 'icon') }}"
                    icon_color: "{{ state_attr('sensor.ui_rv_tomorrow_uv_index_max', 'icon_color') }}"
                    badge_icon: "{{ state_attr('sensor.ui_rv_tomorrow_uv_index_max', 'badge_icon') }}"
                    badge_color: "{{ state_attr('sensor.ui_rv_tomorrow_uv_index_max', 'badge_color') }}"
                    tap_action:
                      action: more-info
                  - type: custom:mushroom-template-card
                    entity: sensor.openmeteo_rv
                    primary: "{{ state_attr('sensor.ui_rv_day_2_uv_index_max', 'primary') }}"
                    secondary: "{{ state_attr('sensor.ui_rv_day_2_uv_index_max', 'secondary') }}"
                    icon: "{{ state_attr('sensor.ui_rv_day_2_uv_index_max', 'icon') }}"
                    icon_color: "{{ state_attr('sensor.ui_rv_day_2_uv_index_max', 'icon_color') }}"
                    badge_icon: "{{ state_attr('sensor.ui_rv_day_2_uv_index_max', 'badge_icon') }}"
                    badge_color: "{{ state_attr('sensor.ui_rv_day_2_uv_index_max', 'badge_color') }}"
                    tap_action:
                      action: more-info
