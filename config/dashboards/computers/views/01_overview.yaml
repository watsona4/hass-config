title: Systems Overview
type: sections
max_columns: 2
cards: []

badges:
  - type: custom:mushroom-template-badge
    entity: sensor.laptop_cpu_utilization
    icon: "{{ state_attr('sensor.ui_laptop_cpu_utilization', 'icon') }}"
    color: "{{ state_attr('sensor.ui_laptop_cpu_utilization', 'color') }}"
    label: Laptop
    content: "{{ state_attr('sensor.ui_laptop_cpu_utilization', 'short_label') }}"
    tap_action:
      action: more-info
  - type: custom:mushroom-template-badge
    entity: sensor.frigate_cpu_utilization
    icon: "{{ state_attr('sensor.ui_frigate_cpu_utilization', 'icon') }}"
    color: "{{ state_attr('sensor.ui_frigate_cpu_utilization', 'color') }}"
    label: Frigate
    content: "{{ state_attr('sensor.ui_frigate_cpu_utilization', 'short_label') }}"
    tap_action:
      action: more-info
  - type: custom:mushroom-template-badge
    entity: sensor.desktop_bq063ig_cpu_utilization
    icon: "{{ state_attr('sensor.ui_desktop_bq063ig_cpu_utilization', 'icon') }}"
    color: "{{ state_attr('sensor.ui_desktop_bq063ig_cpu_utilization', 'color') }}"
    label: Desktop
    content: "{{ state_attr('sensor.ui_desktop_bq063ig_cpu_utilization', 'short_label') }}"
    tap_action:
      action: more-info
  - type: custom:mushroom-template-badge
    entity: sensor.opnsense_cpu_utilization
    icon: "{{ state_attr('sensor.ui_opnsense_cpu_utilization', 'icon') }}"
    color: "{{ state_attr('sensor.ui_opnsense_cpu_utilization', 'color') }}"
    label: OPNSense
    content: "{{ state_attr('sensor.ui_opnsense_cpu_utilization', 'short_label') }}"
    tap_action:
      action: more-info
sections:
  - type: grid
    column_span: 2
    cards:
      - type: vertical-stack
        cards:

          # Header
          - type: custom:mushroom-title-card
            title: Laptop
            subtitle: "{{ states('sensor.laptop_overall_status_summary') }}"

          # Summary
          - type: horizontal-stack
            cards:
              - type: custom:mushroom-template-card
                entity: sensor.laptop_uptime_s
                icon: "{{ state_attr('sensor.ui_laptop_uptime_s', 'icon') }}"
                icon_color: "{{ state_attr('sensor.ui_laptop_uptime_s', 'color') }}"
                primary: Uptime
                secondary: "{{ state_attr('sensor.ui_laptop_uptime_s', 'label_vertical') }}"
                badge_icon: "{{ state_attr('sensor.ui_laptop_uptime_s', 'badge') }}"
                badge_color: "{{ state_attr('sensor.ui_laptop_uptime_s', 'badge_color') }}"
                layout: vertical
                multiline_secondary: true
                tap_action:
                  action: more-info
                icon_tap_action:
                  action: nothing
                grid_options:
                  columns: 12
                  rows: auto
              - type: custom:mushroom-template-card
                entity: sensor.laptop_updates_pending
                icon: "{{ state_attr('sensor.ui_laptop_updates_pending', 'icon') }}"
                icon_color: "{{ state_attr('sensor.ui_laptop_updates_pending', 'color') }}"
                primary: Updates
                secondary: "{{ state_attr('sensor.ui_laptop_updates_pending', 'label_vertical') }}"
                badge_icon: "{{ state_attr('sensor.ui_laptop_updates_pending', 'badge') }}"
                badge_color: "{{ state_attr('sensor.ui_laptop_updates_pending', 'badge_color') }}"
                layout: vertical
                multiline_secondary: true
                tap_action:
                  action: more-info
                icon_tap_action:
                  action: nothing
                grid_options:
                  columns: 12
                  rows: auto
              - type: custom:mushroom-template-card
                entity: binary_sensor.laptop_status_alarm
                icon: "{{ state_attr('sensor.ui_laptop_status_alarm', 'icon') }}"
                icon_color: "{{ state_attr('sensor.ui_laptop_status_alarm', 'color') }}"
                primary: Status
                secondary: "{{ state_attr('sensor.ui_laptop_status_alarm', 'label_vertical') }}"
                badge_icon: "{{ state_attr('sensor.ui_laptop_status_alarm', 'badge') }}"
                badge_color: "{{ state_attr('sensor.ui_laptop_status_alarm', 'badge_color') }}"
                layout: vertical
                multiline_secondary: true
                tap_action:
                  action: more-info
                icon_tap_action:
                  action: nothing
                grid_options:
                  columns: 12
                  rows: auto
          - type: horizontal-stack
            cards:
              - type: custom:mushroom-template-card
                entity: sensor.laptop_cpu_utilization
                icon: "{{ state_attr('sensor.ui_laptop_cpu_utilization_load', 'icon') }}"
                icon_color: "{{ state_attr('sensor.ui_laptop_cpu_utilization_load', 'color') }}"
                primary: CPU
                secondary: "{{ state_attr('sensor.ui_laptop_cpu_utilization_load', 'label') }}"
                badge_icon: "{{ state_attr('sensor.ui_laptop_cpu_utilization_load', 'badge') }}"
                badge_color: "{{ state_attr('sensor.ui_laptop_cpu_utilization_load', 'badge_color') }}"
                multiline_secondary: true
                tap_action:
                  action: more-info
                icon_tap_action:
                  action: nothing
                grid_options:
                  columns: 12
                  rows: auto
              - type: custom:mushroom-template-card
                entity: sensor.laptop_memory_percent
                icon: "{{ state_attr('sensor.ui_laptop_memory_percent', 'icon') }}"
                icon_color: "{{ state_attr('sensor.ui_laptop_memory_percent', 'color') }}"
                primary: Memory
                secondary: "{{ state_attr('sensor.ui_laptop_memory_percent', 'label') }}"
                badge_icon: "{{ state_attr('sensor.ui_laptop_memory_percent', 'badge') }}"
                badge_color: "{{ state_attr('sensor.ui_laptop_memory_percent', 'badge_color') }}"
                multiline_secondary: true
                tap_action:
                  action: more-info
                icon_tap_action:
                  action: nothing
                grid_options:
                  columns: 12
                  rows: auto
          - type: horizontal-stack
            cards:
              - type: custom:mushroom-template-card
                entity: sensor.laptop_fs_c_percent
                icon: "{{ state_attr('sensor.ui_laptop_fs_c_percent', 'icon') }}"
                icon_color: "{{ state_attr('sensor.ui_laptop_fs_c_percent', 'color') }}"
                primary: Disk
                secondary: "{{ state_attr('sensor.ui_laptop_fs_c_percent', 'label') }}"
                badge_icon: "{{ state_attr('sensor.ui_laptop_fs_c_percent', 'badge') }}"
                badge_color: "{{ state_attr('sensor.ui_laptop_fs_c_percent', 'badge_color') }}"
                multiline_secondary: true
                tap_action:
                  action: more-info
                icon_tap_action:
                  action: nothing
                grid_options:
                  columns: 12
                  rows: auto
              - type: vertical-stack
                cards:
                  - type: custom:mushroom-template-card
                    entity: sensor.laptop_cpu_temp_pkg
                    icon: "{{ state_attr('sensor.ui_laptop_cpu_temp_pkg', 'icon') }}"
                    icon_color: "{{ state_attr('sensor.ui_laptop_cpu_temp_pkg', 'color') }}"
                    primary: Temp
                    secondary: "{{ state_attr('sensor.ui_laptop_cpu_temp_pkg', 'label') }}"
                    badge_icon: "{{ state_attr('sensor.ui_laptop_cpu_temp_pkg', 'badge') }}"
                    badge_color: "{{ state_attr('sensor.ui_laptop_cpu_temp_pkg', 'badge_color') }}"
                    multiline_secondary: true
                    tap_action:
                      action: more-info
                    icon_tap_action:
                      action: nothing
                    grid_options:
                      columns: 12
                      rows: auto

          - type: custom:mushroom-title-card
            subtitle: Stopped Services
            visibility:
              - condition: state
                entity: binary_sensor.ui_laptop_services
                state: 'on'

          - type: custom:mushroom-chips-card
            alignment: center
            visibility:
              - condition: state
                entity: binary_sensor.ui_laptop_services
                state: 'on'
            chips:
              - type: template
                icon: "{{ state_attr('binary_sensor.ui_laptop_services','libre_hardware_monitor').icon }}"
                icon_color: "{{ state_attr('binary_sensor.ui_laptop_services','libre_hardware_monitor').icon_color }}"
                content: "{{ state_attr('binary_sensor.ui_laptop_services','libre_hardware_monitor').content }}"
                tap_action:
                  action: none
              - type: template
                icon: "{{ state_attr('binary_sensor.ui_laptop_services','dnscache').icon }}"
                icon_color: "{{ state_attr('binary_sensor.ui_laptop_services','dnscache').icon_color }}"
                content: "{{ state_attr('binary_sensor.ui_laptop_services','dnscache').content }}"
                tap_action:
                  action: none
              - type: template
                icon: "{{ state_attr('binary_sensor.ui_laptop_services','lanman_server').icon }}"
                icon_color: "{{ state_attr('binary_sensor.ui_laptop_services','lanman_server').icon_color }}"
                content: "{{ state_attr('binary_sensor.ui_laptop_services','lanman_server').content }}"
                tap_action:
                  action: none
              - type: template
                icon: "{{ state_attr('binary_sensor.ui_laptop_services','spooler').icon }}"
                icon_color: "{{ state_attr('binary_sensor.ui_laptop_services','spooler').icon_color }}"
                content: "{{ state_attr('binary_sensor.ui_laptop_services','spooler').content }}"
                tap_action:
                  action: none

      - type: vertical-stack
        cards:

          # Header
          - type: custom:mushroom-title-card
            title: Frigate
            subtitle: "{{ states('sensor.frigate_overall_status_summary') }}"

          # Summary
          - type: horizontal-stack
            cards:
              - type: custom:mushroom-template-card
                entity: sensor.frigate_uptime_s
                icon: "{{ state_attr('sensor.ui_frigate_uptime_s', 'icon') }}"
                icon_color: "{{ state_attr('sensor.ui_frigate_uptime_s', 'color') }}"
                primary: Uptime
                secondary: "{{ state_attr('sensor.ui_frigate_uptime_s', 'label_vertical') }}"
                badge_icon: "{{ state_attr('sensor.ui_frigate_uptime_s', 'badge') }}"
                badge_color: "{{ state_attr('sensor.ui_frigate_uptime_s', 'badge_color') }}"
                layout: vertical
                multiline_secondary: true
                tap_action:
                  action: more-info
                icon_tap_action:
                  action: nothing
                grid_options:
                  columns: 12
                  rows: auto
              - type: custom:mushroom-template-card
                entity: sensor.frigate_updates_pending
                icon: "{{ state_attr('sensor.ui_frigate_updates_pending', 'icon') }}"
                icon_color: "{{ state_attr('sensor.ui_frigate_updates_pending', 'color') }}"
                primary: Updates
                secondary: "{{ state_attr('sensor.ui_frigate_updates_pending', 'label_vertical') }}"
                badge_icon: "{{ state_attr('sensor.ui_frigate_updates_pending', 'badge') }}"
                badge_color: "{{ state_attr('sensor.ui_frigate_updates_pending', 'badge_color') }}"
                layout: vertical
                multiline_secondary: true
                tap_action:
                  action: more-info
                icon_tap_action:
                  action: nothing
                grid_options:
                  columns: 12
                  rows: auto
              - type: custom:mushroom-template-card
                entity: binary_sensor.frigate_status_alarm
                icon: "{{ state_attr('sensor.ui_frigate_status_alarm', 'icon') }}"
                icon_color: "{{ state_attr('sensor.ui_frigate_status_alarm', 'color') }}"
                primary: Status
                secondary: "{{ state_attr('sensor.ui_frigate_status_alarm', 'label_vertical') }}"
                badge_icon: "{{ state_attr('sensor.ui_frigate_status_alarm', 'badge') }}"
                badge_color: "{{ state_attr('sensor.ui_frigate_status_alarm', 'badge_color') }}"
                layout: vertical
                multiline_secondary: true
                tap_action:
                  action: more-info
                icon_tap_action:
                  action: nothing
                grid_options:
                  columns: 12
                  rows: auto
          - type: horizontal-stack
            cards:
              - type: custom:mushroom-template-card
                entity: sensor.frigate_cpu_utilization
                icon: "{{ state_attr('sensor.ui_frigate_cpu_utilization_load', 'icon') }}"
                icon_color: "{{ state_attr('sensor.ui_frigate_cpu_utilization_load', 'color') }}"
                primary: CPU
                secondary: "{{ state_attr('sensor.ui_frigate_cpu_utilization_load', 'label') }}"
                badge_icon: "{{ state_attr('sensor.ui_frigate_cpu_utilization_load', 'badge') }}"
                badge_color: "{{ state_attr('sensor.ui_frigate_cpu_utilization_load', 'badge_color') }}"
                multiline_secondary: true
                tap_action:
                  action: more-info
                icon_tap_action:
                  action: nothing
                grid_options:
                  columns: 12
                  rows: auto
              - type: custom:mushroom-template-card
                entity: sensor.frigate_memory_percent
                icon: "{{ state_attr('sensor.ui_frigate_memory_percent', 'icon') }}"
                icon_color: "{{ state_attr('sensor.ui_frigate_memory_percent', 'color') }}"
                primary: Memory
                secondary: "{{ state_attr('sensor.ui_frigate_memory_percent', 'label') }}"
                badge_icon: "{{ state_attr('sensor.ui_frigate_memory_percent', 'badge') }}"
                badge_color: "{{ state_attr('sensor.ui_frigate_memory_percent', 'badge_color') }}"
                multiline_secondary: true
                tap_action:
                  action: more-info
                icon_tap_action:
                  action: nothing
                grid_options:
                  columns: 12
                  rows: auto
          - type: horizontal-stack
            cards:
              - type: vertical-stack
                cards:
                  - type: custom:mushroom-template-card
                    entity: sensor.frigate_fs_root_percent
                    icon: "{{ state_attr('sensor.ui_frigate_fs_root_percent', 'icon') }}"
                    icon_color: "{{ state_attr('sensor.ui_frigate_fs_root_percent', 'color') }}"
                    primary: NVMe
                    secondary: "{{ state_attr('sensor.ui_frigate_fs_root_percent', 'label') }}"
                    badge_icon: "{{ state_attr('sensor.ui_frigate_fs_root_percent', 'badge') }}"
                    badge_color: "{{ state_attr('sensor.ui_frigate_fs_root_percent', 'badge_color') }}"
                    multiline_secondary: true
                    tap_action:
                      action: more-info
                    icon_tap_action:
                      action: nothing
                    grid_options:
                      columns: 12
                      rows: auto
                  - type: custom:mushroom-template-card
                    entity: sensor.frigate_fs_data_percent
                    icon: "{{ state_attr('sensor.ui_frigate_fs_data_percent', 'icon') }}"
                    icon_color: "{{ state_attr('sensor.ui_frigate_fs_data_percent', 'color') }}"
                    primary: HDD
                    secondary: "{{ state_attr('sensor.ui_frigate_fs_data_percent', 'label') }}"
                    badge_icon: "{{ state_attr('sensor.ui_frigate_fs_data_percent', 'badge') }}"
                    badge_color: "{{ state_attr('sensor.ui_frigate_fs_data_percent', 'badge_color') }}"
                    multiline_secondary: true
                    tap_action:
                      action: more-info
                    icon_tap_action:
                      action: nothing
                    grid_options:
                      columns: 12
                      rows: auto
              - type: vertical-stack
                cards:
                  - type: custom:mushroom-template-card
                    entity: sensor.frigate_cpu_temp_pkg
                    icon: "{{ state_attr('sensor.ui_frigate_cpu_temp_pkg', 'icon') }}"
                    icon_color: "{{ state_attr('sensor.ui_frigate_cpu_temp_pkg', 'color') }}"
                    primary: Temp
                    secondary: "{{ state_attr('sensor.ui_frigate_cpu_temp_pkg', 'label') }}"
                    badge_icon: "{{ state_attr('sensor.ui_frigate_cpu_temp_pkg', 'badge') }}"
                    badge_color: "{{ state_attr('sensor.ui_frigate_cpu_temp_pkg', 'badge_color') }}"
                    multiline_secondary: true
                    tap_action:
                      action: more-info
                    icon_tap_action:
                      action: nothing
                    grid_options:
                      columns: 12
                      rows: auto
                  - type: custom:mushroom-template-card
                    visibility:
                      - condition: state
                        entity: sensor.frigate_gpu_utilization
                        state_not: unknown
                    entity: sensor.frigate_gpu_utilization
                    icon: "{{ state_attr('sensor.ui_frigate_gpu_utilization', 'icon') }}"
                    icon_color: "{{ state_attr('sensor.ui_frigate_gpu_utilization', 'color') }}"
                    primary: GPU
                    secondary: "{{ state_attr('sensor.ui_frigate_gpu_utilization', 'label') }}"
                    badge_icon: "{{ state_attr('sensor.ui_frigate_gpu_utilization', 'badge') }}"
                    badge_color: "{{ state_attr('sensor.ui_frigate_gpu_utilization', 'badge_color') }}"
                    multiline_secondary: true
                    tap_action:
                      action: more-info
                    icon_tap_action:
                      action: nothing
                    grid_options:
                      columns: 12
                      rows: auto
                  - type: custom:mushroom-template-card
                    visibility:
                      - condition: state
                        entity: sensor.frigate_coral_apex_0_temp
                        state_not: unknown
                    entity: sensor.frigate_coral_apex_0_temp
                    icon: "{{ state_attr('sensor.ui_frigate_coral_apex_0_temp', 'icon') }}"
                    icon_color: "{{ state_attr('sensor.ui_frigate_coral_apex_0_temp', 'color') }}"
                    primary: TPU
                    secondary: "{{ state_attr('sensor.ui_frigate_coral_apex_0_temp', 'label') }}"
                    badge_icon: "{{ state_attr('sensor.ui_frigate_coral_apex_0_temp', 'badge') }}"
                    badge_color: "{{ state_attr('sensor.ui_frigate_coral_apex_0_temp', 'badge_color') }}"
                    multiline_secondary: true
                    tap_action:
                      action: more-info
                    icon_tap_action:
                      action: nothing
                    grid_options:
                      columns: 12
                      rows: auto
          - type: custom:mushroom-title-card
            subtitle: Stopped Services
            visibility:
              - condition: state
                entity: binary_sensor.frigate_display_services
                state: 'on'
          - type: custom:auto-entities
            card:
              type: custom:mushroom-chips-card
              alignment: start
            card_param: chips
            filter:
              include:
                - entity_id: binary_sensor.frigate*_service_*
                  state: 'off'
                  options:
                    type: template
                    entity: this.entity_id
                    icon: |
                      {{- 'mdi:cog' if is_state(entity,'on') else 'mdi:cog-off' -}}
                    icon_color: |
                      {{- 'green' if is_state(entity,'on') else 'red' -}}
                    content: >
                      {%- set s = state_attr(entity,'friendly_name') | default('', true) -%}
                      {{- (s.partition('Service')[2]) if 'Service' in s else '' -}}
                    tap_action: none
              exclude: []
            sort:
              method: name
          - type: custom:mushroom-title-card
            subtitle: Stopped Containers
            visibility:
              - condition: state
                entity: binary_sensor.frigate_display_containers
                state: 'on'
          - type: custom:auto-entities
            card:
              type: custom:mushroom-chips-card
              alignment: start
            card_param: chips
            filter:
              include:
                - entity_id: binary_sensor.frigate*_container_*
                  state: 'off'
                  options:
                    type: template
                    entity: this.entity_id
                    icon: >
                      {{- 'mdi:server' if is_state(entity,'on') else 'mdi:server-off' -}}
                    icon_color: |
                      {{- 'green' if is_state(entity,'on') else 'red' -}}
                    content: >
                      {%- set s = state_attr(entity,'friendly_name') | default('', true) -%}
                      {{- (s.partition('Container')[2]) if 'Container' in s else '' -}}
                    tap_action: none
              exclude: []
            sort:
              method: name

      - type: vertical-stack
        cards:

          # Header
          - type: custom:mushroom-title-card
            title: Desktop
            subtitle: "{{ states('sensor.desktop_bq063ig_overall_status_summary') }}"

          # Summary
          - type: horizontal-stack
            cards:
              - type: custom:mushroom-template-card
                entity: sensor.desktop_bq063ig_uptime_s
                icon: "{{ state_attr('sensor.ui_desktop_bq063ig_uptime_s', 'icon') }}"
                icon_color: "{{ state_attr('sensor.ui_desktop_bq063ig_uptime_s', 'color') }}"
                primary: Uptime
                secondary: "{{ state_attr('sensor.ui_desktop_bq063ig_uptime_s', 'label_vertical') }}"
                badge_icon: "{{ state_attr('sensor.ui_desktop_bq063ig_uptime_s', 'badge') }}"
                badge_color: "{{ state_attr('sensor.ui_desktop_bq063ig_uptime_s', 'badge_color') }}"
                layout: vertical
                multiline_secondary: true
                tap_action:
                  action: more-info
                icon_tap_action:
                  action: nothing
                grid_options:
                  columns: 12
                  rows: auto
              - type: custom:mushroom-template-card
                entity: sensor.desktop_bq063ig_updates_pending
                icon: "{{ state_attr('sensor.ui_desktop_bq063ig_updates_pending', 'icon') }}"
                icon_color: "{{ state_attr('sensor.ui_desktop_bq063ig_updates_pending', 'color') }}"
                primary: Updates
                secondary: "{{ state_attr('sensor.ui_desktop_bq063ig_updates_pending', 'label_vertical') }}"
                badge_icon: "{{ state_attr('sensor.ui_desktop_bq063ig_updates_pending', 'badge') }}"
                badge_color: "{{ state_attr('sensor.ui_desktop_bq063ig_updates_pending', 'badge_color') }}"
                layout: vertical
                multiline_secondary: true
                tap_action:
                  action: more-info
                icon_tap_action:
                  action: nothing
                grid_options:
                  columns: 12
                  rows: auto
              - type: custom:mushroom-template-card
                entity: binary_sensor.desktop_bq063ig_status_alarm
                icon: "{{ state_attr('sensor.ui_desktop_bq063ig_status_alarm', 'icon') }}"
                icon_color: "{{ state_attr('sensor.ui_desktop_bq063ig_status_alarm', 'color') }}"
                primary: Status
                secondary: "{{ state_attr('sensor.ui_desktop_bq063ig_status_alarm', 'label_vertical') }}"
                badge_icon: "{{ state_attr('sensor.ui_desktop_bq063ig_status_alarm', 'badge') }}"
                badge_color: "{{ state_attr('sensor.ui_desktop_bq063ig_status_alarm', 'badge_color') }}"
                layout: vertical
                multiline_secondary: true
                tap_action:
                  action: more-info
                icon_tap_action:
                  action: nothing
                grid_options:
                  columns: 12
                  rows: auto
          - type: horizontal-stack
            cards:
              - type: custom:mushroom-template-card
                entity: sensor.desktop_bq063ig_cpu_utilization
                icon: "{{ state_attr('sensor.ui_desktop_bq063ig_cpu_utilization_load', 'icon') }}"
                icon_color: "{{ state_attr('sensor.ui_desktop_bq063ig_cpu_utilization_load', 'color') }}"
                primary: CPU
                secondary: "{{ state_attr('sensor.ui_desktop_bq063ig_cpu_utilization_load', 'label') }}"
                badge_icon: "{{ state_attr('sensor.ui_desktop_bq063ig_cpu_utilization_load', 'badge') }}"
                badge_color: "{{ state_attr('sensor.ui_desktop_bq063ig_cpu_utilization_load', 'badge_color') }}"
                multiline_secondary: true
                tap_action:
                  action: more-info
                icon_tap_action:
                  action: nothing
                grid_options:
                  columns: 12
                  rows: auto
              - type: custom:mushroom-template-card
                entity: sensor.desktop_bq063ig_memory_percent
                icon: "{{ state_attr('sensor.ui_desktop_bq063ig_memory_percent', 'icon') }}"
                icon_color: "{{ state_attr('sensor.ui_desktop_bq063ig_memory_percent', 'color') }}"
                primary: Memory
                secondary: "{{ state_attr('sensor.ui_desktop_bq063ig_memory_percent', 'label') }}"
                badge_icon: "{{ state_attr('sensor.ui_desktop_bq063ig_memory_percent', 'badge') }}"
                badge_color: "{{ state_attr('sensor.ui_desktop_bq063ig_memory_percent', 'badge_color') }}"
                multiline_secondary: true
                tap_action:
                  action: more-info
                icon_tap_action:
                  action: nothing
                grid_options:
                  columns: 12
                  rows: auto
          - type: horizontal-stack
            cards:
              - type: custom:mushroom-template-card
                entity: sensor.desktop_bq063ig_fs_c_percent
                icon: "{{ state_attr('sensor.ui_desktop_bq063ig_fs_c_percent', 'icon') }}"
                icon_color: "{{ state_attr('sensor.ui_desktop_bq063ig_fs_c_percent', 'color') }}"
                primary: Disk
                secondary: "{{ state_attr('sensor.ui_desktop_bq063ig_fs_c_percent', 'label') }}"
                badge_icon: "{{ state_attr('sensor.ui_desktop_bq063ig_fs_c_percent', 'badge') }}"
                badge_color: "{{ state_attr('sensor.ui_desktop_bq063ig_fs_c_percent', 'badge_color') }}"
                multiline_secondary: true
                tap_action:
                  action: more-info
                icon_tap_action:
                  action: nothing
                grid_options:
                  columns: 12
                  rows: auto
              - type: vertical-stack
                cards:
                  - type: custom:mushroom-template-card
                    entity: sensor.desktop_bq063ig_cpu_temp_pkg
                    icon: "{{ state_attr('sensor.ui_desktop_bq063ig_cpu_temp_pkg', 'icon') }}"
                    icon_color: "{{ state_attr('sensor.ui_desktop_bq063ig_cpu_temp_pkg', 'color') }}"
                    primary: Temp
                    secondary: "{{ state_attr('sensor.ui_desktop_bq063ig_cpu_temp_pkg', 'label') }}"
                    badge_icon: "{{ state_attr('sensor.ui_desktop_bq063ig_cpu_temp_pkg', 'badge') }}"
                    badge_color: "{{ state_attr('sensor.ui_desktop_bq063ig_cpu_temp_pkg', 'badge_color') }}"
                    multiline_secondary: true
                    tap_action:
                      action: more-info
                    icon_tap_action:
                      action: nothing
                    grid_options:
                      columns: 12
                      rows: auto
                  - type: custom:mushroom-template-card
                    entity: sensor.desktop_bq063ig_gpu_utilization
                    icon: "{{ state_attr('sensor.ui_desktop_bq063ig_gpu_utilization', 'icon') }}"
                    icon_color: "{{ state_attr('sensor.ui_desktop_bq063ig_gpu_utilization', 'color') }}"
                    primary: GPU
                    secondary: "{{ state_attr('sensor.ui_desktop_bq063ig_gpu_utilization', 'label') }}"
                    badge_icon: "{{ state_attr('sensor.ui_desktop_bq063ig_gpu_utilization', 'badge') }}"
                    badge_color: "{{ state_attr('sensor.ui_desktop_bq063ig_gpu_utilization', 'badge_color') }}"
                    multiline_secondary: true
                    tap_action:
                      action: more-info
                    icon_tap_action:
                      action: nothing
                    grid_options:
                      columns: 12
                      rows: auto
          - type: custom:mushroom-title-card
            subtitle: Stopped Services
            visibility:
              - condition: state
                entity: binary_sensor.desktop_display_services
                state: 'on'
          - type: custom:auto-entities
            card:
              type: custom:mushroom-chips-card
              alignment: start
            card_param: chips
            filter:
              include:
                - entity_id: binary_sensor.desktop_bq063ig*_service_*
                  state: 'off'
                  options:
                    type: template
                    entity: this.entity_id
                    icon: |
                      {{- 'mdi:cog' if is_state(entity,'on') else 'mdi:cog-off' -}}
                    icon_color: |
                      {{- 'green' if is_state(entity,'on') else 'red' -}}
                    content: >
                      {%- set s = state_attr(entity,'friendly_name') | default('', true) -%}
                      {{- (s.partition('Service')[2]) if 'Service' in s else '' -}}
                    tap_action: none
              exclude: []
            sort:
              method: name

      - type: vertical-stack
        cards:

          # Header
          - type: custom:mushroom-title-card
            title: OPNSense
            subtitle: "{{ states('sensor.opnsense_overall_status_summary') }}"

          # Summary
          - type: horizontal-stack
            cards:
              - type: custom:mushroom-template-card
                entity: sensor.opnsense_uptime_s
                icon: "{{ state_attr('sensor.ui_opnsense_uptime_s', 'icon') }}"
                icon_color: "{{ state_attr('sensor.ui_opnsense_uptime_s', 'color') }}"
                primary: Uptime
                secondary: "{{ state_attr('sensor.ui_opnsense_uptime_s', 'label_vertical') }}"
                badge_icon: "{{ state_attr('sensor.ui_opnsense_uptime_s', 'badge') }}"
                badge_color: "{{ state_attr('sensor.ui_opnsense_uptime_s', 'badge_color') }}"
                layout: vertical
                multiline_secondary: true
                tap_action:
                  action: more-info
                icon_tap_action:
                  action: nothing
                grid_options:
                  columns: 12
                  rows: auto
              - type: custom:mushroom-template-card
                entity: sensor.opnsense_updates_pending
                icon: "{{ state_attr('sensor.ui_opnsense_updates_pending', 'icon') }}"
                icon_color: "{{ state_attr('sensor.ui_opnsense_updates_pending', 'color') }}"
                primary: Updates
                secondary: "{{ state_attr('sensor.ui_opnsense_updates_pending', 'label_vertical') }}"
                badge_icon: "{{ state_attr('sensor.ui_opnsense_updates_pending', 'badge') }}"
                badge_color: "{{ state_attr('sensor.ui_opnsense_updates_pending', 'badge_color') }}"
                layout: vertical
                multiline_secondary: true
                tap_action:
                  action: more-info
                icon_tap_action:
                  action: nothing
                grid_options:
                  columns: 12
                  rows: auto
              - type: custom:mushroom-template-card
                entity: binary_sensor.opnsense_status_alarm
                icon: "{{ state_attr('sensor.ui_opnsense_status_alarm', 'icon') }}"
                icon_color: "{{ state_attr('sensor.ui_opnsense_status_alarm', 'color') }}"
                primary: Status
                secondary: "{{ state_attr('sensor.ui_opnsense_status_alarm', 'label_vertical') }}"
                badge_icon: "{{ state_attr('sensor.ui_opnsense_status_alarm', 'badge') }}"
                badge_color: "{{ state_attr('sensor.ui_opnsense_status_alarm', 'badge_color') }}"
                layout: vertical
                multiline_secondary: true
                tap_action:
                  action: more-info
                icon_tap_action:
                  action: nothing
                grid_options:
                  columns: 12
                  rows: auto
          - type: horizontal-stack
            cards:
              - type: custom:mushroom-template-card
                entity: sensor.opnsense_cpu_utilization
                icon: "{{ state_attr('sensor.ui_opnsense_cpu_utilization_load', 'icon') }}"
                icon_color: "{{ state_attr('sensor.ui_opnsense_cpu_utilization_load', 'color') }}"
                primary: CPU
                secondary: "{{ state_attr('sensor.ui_opnsense_cpu_utilization_load', 'label') }}"
                badge_icon: "{{ state_attr('sensor.ui_opnsense_cpu_utilization_load', 'badge') }}"
                badge_color: "{{ state_attr('sensor.ui_opnsense_cpu_utilization_load', 'badge_color') }}"
                multiline_secondary: true
                tap_action:
                  action: more-info
                icon_tap_action:
                  action: nothing
                grid_options:
                  columns: 12
                  rows: auto
              - type: custom:mushroom-template-card
                entity: sensor.opnsense_memory_percent
                icon: "{{ state_attr('sensor.ui_opnsense_memory_percent', 'icon') }}"
                icon_color: "{{ state_attr('sensor.ui_opnsense_memory_percent', 'color') }}"
                primary: Memory
                secondary: "{{ state_attr('sensor.ui_opnsense_memory_percent', 'label') }}"
                badge_icon: "{{ state_attr('sensor.ui_opnsense_memory_percent', 'badge') }}"
                badge_color: "{{ state_attr('sensor.ui_opnsense_memory_percent', 'badge_color') }}"
                multiline_secondary: true
                tap_action:
                  action: more-info
                icon_tap_action:
                  action: nothing
                grid_options:
                  columns: 12
                  rows: auto
          - type: horizontal-stack
            cards:
              - type: custom:mushroom-template-card
                entity: sensor.opnsense_fs_percent
                icon: "{{ state_attr('sensor.ui_opnsense_fs_percent', 'icon') }}"
                icon_color: "{{ state_attr('sensor.ui_opnsense_fs_percent', 'color') }}"
                primary: Disk
                secondary: "{{ state_attr('sensor.ui_opnsense_fs_percent', 'label') }}"
                badge_icon: "{{ state_attr('sensor.ui_opnsense_fs_percent', 'badge') }}"
                badge_color: "{{ state_attr('sensor.ui_opnsense_fs_percent', 'badge_color') }}"
                multiline_secondary: true
                tap_action:
                  action: more-info
                icon_tap_action:
                  action: nothing
                grid_options:
                  columns: 12
                  rows: auto
              - type: vertical-stack
                cards:
                  - type: custom:mushroom-template-card
                    entity: sensor.opnsense_cpu_temp_avg
                    icon: "{{ state_attr('sensor.ui_opnsense_cpu_temp_avg', 'icon') }}"
                    icon_color: "{{ state_attr('sensor.ui_opnsense_cpu_temp_avg', 'color') }}"
                    primary: Temp
                    secondary: "{{ state_attr('sensor.ui_opnsense_cpu_temp_avg', 'label') }}"
                    badge_icon: "{{ state_attr('sensor.ui_opnsense_cpu_temp_avg', 'badge') }}"
                    badge_color: "{{ state_attr('sensor.ui_opnsense_cpu_temp_avg', 'badge_color') }}"
                    multiline_secondary: true
                    tap_action:
                      action: more-info
                    icon_tap_action:
                      action: nothing
                    grid_options:
                      columns: 12
                      rows: auto
          - type: custom:mushroom-title-card
            subtitle: Stopped Services
            visibility:
              - condition: state
                entity: binary_sensor.opnsense_display_services
                state: 'on'
          - type: custom:auto-entities
            card:
              type: custom:mushroom-chips-card
              alignment: start
            card_param: chips
            filter:
              include:
                - entity_id: binary_sensor.opnsense*_service_*
                  state: 'off'
                  options:
                    type: template
                    entity: this.entity_id
                    icon: |
                      {{- 'mdi:cog' if is_state(entity,'on') else 'mdi:cog-off' -}}
                    icon_color: |
                      {{- 'green' if is_state(entity,'on') else 'red' -}}
                    content: >
                      {%- set s = state_attr(entity,'friendly_name') | default('', true) -%}
                      {{- (s.partition('Service')[2]) if 'Service' in s else '' -}}
                    tap_action: none
              exclude: []
            sort:
              method: name

      - type: vertical-stack
        cards:

          # Header
          - type: custom:mushroom-title-card
            title: RaspberryPi
            subtitle: "{{ states('sensor.raspberrypi4_overall_status_summary') }}"

          # Summary
          - type: horizontal-stack
            cards:
              - type: custom:mushroom-template-card
                entity: sensor.raspberrypi4_uptime_s
                icon: "{{ state_attr('sensor.ui_raspberrypi4_uptime_s', 'icon') }}"
                icon_color: "{{ state_attr('sensor.ui_raspberrypi4_uptime_s', 'color') }}"
                primary: Uptime
                secondary: "{{ state_attr('sensor.ui_raspberrypi4_uptime_s', 'label_vertical') }}"
                badge_icon: "{{ state_attr('sensor.ui_raspberrypi4_uptime_s', 'badge') }}"
                badge_color: "{{ state_attr('sensor.ui_raspberrypi4_uptime_s', 'badge_color') }}"
                layout: vertical
                multiline_secondary: true
                tap_action:
                  action: more-info
                icon_tap_action:
                  action: nothing
                grid_options:
                  columns: 12
                  rows: auto
              - type: custom:mushroom-template-card
                entity: sensor.raspberrypi4_updates_pending
                icon: "{{ state_attr('sensor.ui_raspberrypi4_updates_pending', 'icon') }}"
                icon_color: "{{ state_attr('sensor.ui_raspberrypi4_updates_pending', 'color') }}"
                primary: Updates
                secondary: "{{ state_attr('sensor.ui_raspberrypi4_updates_pending', 'label_vertical') }}"
                badge_icon: "{{ state_attr('sensor.ui_raspberrypi4_updates_pending', 'badge') }}"
                badge_color: "{{ state_attr('sensor.ui_raspberrypi4_updates_pending', 'badge_color') }}"
                layout: vertical
                multiline_secondary: true
                tap_action:
                  action: more-info
                icon_tap_action:
                  action: nothing
                grid_options:
                  columns: 12
                  rows: auto
              - type: custom:mushroom-template-card
                entity: binary_sensor.raspberrypi4_status_alarm
                icon: "{{ state_attr('sensor.ui_raspberrypi4_status_alarm', 'icon') }}"
                icon_color: "{{ state_attr('sensor.ui_raspberrypi4_status_alarm', 'color') }}"
                primary: Status
                secondary: "{{ state_attr('sensor.ui_raspberrypi4_status_alarm', 'label_vertical') }}"
                badge_icon: "{{ state_attr('sensor.ui_raspberrypi4_status_alarm', 'badge') }}"
                badge_color: "{{ state_attr('sensor.ui_raspberrypi4_status_alarm', 'badge_color') }}"
                layout: vertical
                multiline_secondary: true
                tap_action:
                  action: more-info
                icon_tap_action:
                  action: nothing
                grid_options:
                  columns: 12
                  rows: auto
          - type: horizontal-stack
            cards:
              - type: custom:mushroom-template-card
                entity: sensor.raspberrypi4_cpu_utilization
                icon: "{{ state_attr('sensor.ui_raspberrypi4_cpu_utilization_load', 'icon') }}"
                icon_color: "{{ state_attr('sensor.ui_raspberrypi4_cpu_utilization_load', 'color') }}"
                primary: CPU
                secondary: "{{ state_attr('sensor.ui_raspberrypi4_cpu_utilization_load', 'label') }}"
                badge_icon: "{{ state_attr('sensor.ui_raspberrypi4_cpu_utilization_load', 'badge') }}"
                badge_color: "{{ state_attr('sensor.ui_raspberrypi4_cpu_utilization_load', 'badge_color') }}"
                multiline_secondary: true
                tap_action:
                  action: more-info
                icon_tap_action:
                  action: nothing
                grid_options:
                  columns: 12
                  rows: auto
              - type: custom:mushroom-template-card
                entity: sensor.raspberrypi4_memory_percent
                icon: "{{ state_attr('sensor.ui_raspberrypi4_memory_percent', 'icon') }}"
                icon_color: "{{ state_attr('sensor.ui_raspberrypi4_memory_percent', 'color') }}"
                primary: Memory
                secondary: "{{ state_attr('sensor.ui_raspberrypi4_memory_percent', 'label') }}"
                badge_icon: "{{ state_attr('sensor.ui_raspberrypi4_memory_percent', 'badge') }}"
                badge_color: "{{ state_attr('sensor.ui_raspberrypi4_memory_percent', 'badge_color') }}"
                multiline_secondary: true
                tap_action:
                  action: more-info
                icon_tap_action:
                  action: nothing
                grid_options:
                  columns: 12
                  rows: auto
          - type: horizontal-stack
            cards:
              - type: custom:mushroom-template-card
                entity: sensor.raspberrypi4_fs_percent
                icon: "{{ state_attr('sensor.ui_raspberrypi4_fs_percent', 'icon') }}"
                icon_color: "{{ state_attr('sensor.ui_raspberrypi4_fs_percent', 'color') }}"
                primary: Disk
                secondary: "{{ state_attr('sensor.ui_raspberrypi4_fs_percent', 'label') }}"
                badge_icon: "{{ state_attr('sensor.ui_raspberrypi4_fs_percent', 'badge') }}"
                badge_color: "{{ state_attr('sensor.ui_raspberrypi4_fs_percent', 'badge_color') }}"
                multiline_secondary: true
                tap_action:
                  action: more-info
                icon_tap_action:
                  action: nothing
                grid_options:
                  columns: 12
                  rows: auto
              - type: vertical-stack
                cards:
                  - type: custom:mushroom-template-card
                    entity: sensor.raspberrypi4_cpu_temp_cpu_thermal_0
                    icon: "{{ state_attr('sensor.ui_raspberrypi4_cpu_temp_cpu_thermal_0', 'icon') }}"
                    icon_color: "{{ state_attr('sensor.ui_raspberrypi4_cpu_temp_cpu_thermal_0', 'color') }}"
                    primary: Temp
                    secondary: "{{ state_attr('sensor.ui_raspberrypi4_cpu_temp_cpu_thermal_0', 'label') }}"
                    badge_icon: "{{ state_attr('sensor.ui_raspberrypi4_cpu_temp_cpu_thermal_0', 'badge') }}"
                    badge_color: "{{ state_attr('sensor.ui_raspberrypi4_cpu_temp_cpu_thermal_0', 'badge_color') }}"
                    multiline_secondary: true
                    tap_action:
                      action: more-info
                    icon_tap_action:
                      action: nothing
                    grid_options:
                      columns: 12
                      rows: auto
          - type: custom:mushroom-title-card
            subtitle: Stopped Services
            visibility:
              - condition: state
                entity: binary_sensor.raspberrypi4_display_services
                state: 'on'
          - type: custom:auto-entities
            card:
              type: custom:mushroom-chips-card
              alignment: start
            card_param: chips
            filter:
              include:
                - entity_id: binary_sensor.raspberrypi4*_service_*
                  state: 'off'
                  options:
                    type: template
                    entity: this.entity_id
                    icon: |
                      {{- 'mdi:cog' if is_state(entity,'on') else 'mdi:cog-off' -}}
                    icon_color: |
                      {{- 'green' if is_state(entity,'on') else 'red' -}}
                    content: >
                      {%- set s = state_attr(entity,'friendly_name') | default('', true) -%}
                      {{- (s.partition('Service')[2]) if 'Service' in s else '' -}}
                    tap_action: none
              exclude: []
            sort:
              method: name
