# File: docker/homeassistant/config/dashboards/overview/decluttering.yaml
# Decluttering templates for Overview dashboard

# Title Card
title_card:
  card:
    type: custom:mushroom-title-card
    title: '[[title]]'
    subtitle: '[[subtitle]]'

# Template Card
template_card:
  default:
    - name: default
    - width: default
    - vertical: false
    - app: default
    - options: ''
    - multiline_secondary: false
    - tap_action:
        action: more-info
    - icon_tap_action:
        action: nothing
  card:
    type: custom:mushroom-template-card
    entity: '[[entity]]'
    icon: >-
      {%- from 'helpers.jinja' import parse_options_kv -%}
      {%- from 'main.jinja' import get_icon -%}
      {{- get_icon(entity, '[[app]]', parse_options_kv('[[options]]') | from_json) -}}
    icon_color: >-
      {%- from 'helpers.jinja' import parse_options_kv -%}
      {%- from 'main.jinja' import get_color -%}
      {{- get_color(entity, '[[app]]', parse_options_kv('[[options]]') | from_json) -}}
    primary: >-
      {%- if '[[name]]' == 'default' -%}
        {%- from 'helpers.jinja' import parse_options_kv -%}
        {%- from 'main.jinja' import get_name -%}
        {{- get_name(entity, '[[app]]', parse_options_kv('[[options]]') | from_json) -}}
      {%- else -%}
        {{- '[[name]]' -}}
      {%- endif -%}
    secondary: >-
      {%- from 'helpers.jinja' import parse_options_kv -%}
      {%- import 'main.jinja' as main -%}
      {%- set opts = ('[[options]]'.split(';') + ['vertical=[[vertical]]']) | join(';') -%}
      {%- if '[[width]]' == 'narrow' -%}
        {{- main.get_short_label(entity, '[[app]]', parse_options_kv(opts) | from_json) -}}
      {%- elif '[[width]]' == 'wide' -%}
        {{- main.get_long_label(entity, '[[app]]', parse_options_kv(opts) | from_json) -}}
      {%- else -%}
        {{- main.get_label(entity, '[[app]]', parse_options_kv(opts) | from_json) -}}
      {%- endif -%}
    badge_icon: >-
      {%- from 'helpers.jinja' import parse_options_kv -%}
      {%- from 'main.jinja' import get_badge -%}
      {{- get_badge(entity, '[[app]]', parse_options_kv('[[options]]') | from_json) -}}
    badge_color: >-
      {%- from 'helpers.jinja' import parse_options_kv -%}
      {%- from 'main.jinja' import get_badge_color -%}
      {{- get_badge_color(entity, '[[app]]', parse_options_kv('[[options]]') | from_json) -}}
    vertical: '[[vertical]]'
    multiline_secondary: '[[vertical]]'
    tap_action: '[[tap_action]]'
    icon_tap_action: '[[icon_tap_action]]'

# Climate Card
climate_card:
  card:
    type: custom:mushroom-climate-card
    entity: '[[entity]]'
    name: '[[name]]'
    tap_action:
      action: more-info

# Humidifier Card
humidifier_card:
  card:
    type: custom:mushroom-humidifier-card
    entity: '[[entity]]'
    name: '[[name]]'
    tap_action:
      action: more-info
